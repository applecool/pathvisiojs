var pathvisioNS=pathvisioNS||{};pathvisioNS["src/pathvisiojs.html"]='<div id="pathvisiojs-container" style="width: inherit; height: inherit;">\n\n  <!-- **********************************************************************\n    Pathway Container (JavaScript inserts pathway image inside this div)\n    *********************************************************************** -->\n  <div id="diagram-container">\n  </div>\n\n  <!-- **********************************************************************\n    Highlight Element by Label Control\n    *********************************************************************** -->\n  <div id="typeahead">\n    <input id="highlight-by-label-input" placeholder="Enter node name to highlight" role="textbox" aria-autocomplete="list" aria-haspopup="true">\n    <i id="clear-highlights-from-typeahead" class="control-icon icon-remove"></i>\n  </div> \n\n  <!-- **********************************************************************\n    Pan/Zoom Controls \n    *********************************************************************** -->\n  <div id="pan-zoom-control" class="pan-zoom-controls">                           \n    <!-- TODO get this working\n    <i id="zoom-in" class="control-icon pan-zoom-control-icon glyphicon glyphicon-plus-sign"></i>\n    -->\n    <i id="reset-pan-zoom" class="control-icon pan-zoom-control-icon glyphicon glyphicon-screenshot"></i>\n    <!-- TODO get this working\n    <i id="zoom-out" class="control-icon pan-zoom-control-icon glyphicon glyphicon-minus-sign"></i>\n    -->\n    <!-- TODO get this working\n    <i id="full-screen-control" class="control-icon pan-zoom-control-icon glyphicon glyphicon-fullscreen"></i>\n    -->\n  </div>\n\n  <div id="viewer-toolbar">\n  </div>\n\n  <!-- **********************************************************************\n    Details Frame\n    *********************************************************************** -->\n  <div id="annotation" class="annotation ui-draggable">\n    <header class="annotation-header">\n      <span id="annotation-move" class="annotation-header-move">\n        <i class="icon-move"></i>\n      </span>\n      <span class="annotation-header-close" class="annotation-header-close">\n        <i class="icon-remove"></i>\n      </span>   \n      <span id="annotation-header-text" class="annotation-header-text">\n        Header\n      </span> \n      <span id="annotation-header-search" class="annotation-header-search" title="Search for pathways containing \'Header Text\'">\n        <a href="http://wikipathways.org//index.php?title=Special:SearchPathways">\n          <i class="icon-search"></i>\n        </a>\n      </span>\n      <div id="annotation-description" class="annotation-description">\n        <h2>description</h2>\n      </div>\n    </header>\n    <span class="annotation-items-container" class="annotation-items-container">\n      <ul id="annotation-items-container">\n        <!-- List items inside this ul element are generated automatically by JavaScript.\n            Each item will be composed of a title and text. The text can be set to be an href.\n            You can edit the styling of the title by editing CSS class "annotation-item-title"\n            and the styling of the text by editing CSS class "annotation-item-text.\n            -->\n      </ul>\n    </span>\n  </div>\n</div>\n',pathvisioNS["src/css/pathway-diagram.css"]="	svg {\n		color-interpolation: auto;\n		image-rendering: auto;\n		shape-rendering: auto;\n		vector-effect: non-scaling-stroke;\n                background: white;\n	/* removed fill and stroke since they override marker specs */\n	/*	fill: white;\n    		stroke: black; */\n	}\n\n	/* default color for pathway elements */\n	.default-fill-color {\n		fill: black; \n	}\n	.default-stroke-color {\n		stroke: black;\n	}\n	\n	/* default color of the background drawing board */ 	\n	.board-fill-color {\n		fill: white;\n	}\n	.board-stroke-color {\n		stroke: white;\n	}\n\n	.text-area {\n		font-family: Sans-Serif, Helvetica, Arial;\n		text-align: center;\n		vertical-align: middle;\n		font-size: 10px;\n		fill: black;\n		fill-opacity: 1;\n		stroke: none;\n	}\n\n	.citation {\n		font-family: Sans-Serif, Helvetica, Arial;\n		text-align: center;\n		vertical-align: top;\n		font-size: 7px;\n		fill: #999999;\n		fill-opacity: 1;\n		stroke: none;\n	}\n\n	.info-box {\n		font-family: Sans-Serif;\n		font-size: 10px;\n		fill: black;\n		stroke: none;\n		text-align: left;\n		vertical-align: top;\n	}\n\n	.info-box-item-property-name {\n		font-weight: bold;\n	}\n\n	.info-box-item-property-value {\n	}\n\n	.data-node {\n		text-align: right;\n		fill-opacity: 1;\n		fill: white;\n		stroke: black;\n		stroke-width: 1;\n		stroke-dasharray: 0;\n		stroke-miterlimit: 1;\n    		pointer-events:auto;\n	}\n	.data-node:hover {\n	 	cursor: pointer;\n	}\n	\n	.has-xref:hover {\n		cursor: pointer;\n	}\n\n	.data-node.gene-product {\n	}\n\n	.metabolite {\n		stroke: blue;\n	}\n\n	.data-node.metabolite > .text-area {\n		fill: blue;\n		fill-opacity: 1;\n		stroke: none;\n	}\n\n	.data-node.pathway {\n		stroke: none;\n		fill-opacity: 0;\n	}\n\n	.data-node.pathway > .text-area {\n		fill: rgb(20,150,30);\n		fill-opacity: 1;\n		font-size: 12px;\n		font-weight: bold;\n	}\n\n	.data-node.protein {\n	}\n\n	.data-node.rna {\n	}\n\n	.data-node.unknown {\n	}\n\n	.label {\n		stroke: null;\n		stroke-width: 0;\n		fill-opacity: 0;\n		stroke-dasharray: 0;\n		stroke-miterlimit: 1;\n	}\n\n	.shape {\n		fill-opacity: 0;\n		stroke: black;\n		stroke-dasharray: 0;\n		stroke-miterlimit: 1;\n	}\n\n	.shape.none {\n		fill: none;\n		fill-opacity: 0;\n		stroke: none;\n	}\n\n	g.group-node > .shape {\n		fill-opacity: 0.098;\n		stroke: gray;\n		stroke-miterlimit: 1;\n		stroke-width: 1px;\n    		pointer-events:none;\n	}\n\n	.group-node {\n		fill-opacity: 0.098;\n		stroke: gray;\n		stroke-miterlimit: 1;\n		stroke-width: 1px;\n    		pointer-events:none;\n	}\n\n	.group-node > .text-area {\n		fill-opacity: 0.4;\n		font-family: Serif, Times;\n		font-size: 32px;\n		fill: black;\n		stroke-width: 0;\n		font-weight: bold;\n  	}	\n\n	.group-node.none {\n		fill: rgb(180,180,100);\n		stroke-dasharray: 5,3;\n	}\n\n	.group-node.none > .text-area {\n		display: none;\n  	}	\n\n	/*.group-node.none:hover {\n		fill: rgb(255,180,100);\n		fill-opacity: 0.05;\n	}*/\n\n	.group-node.group {\n		fill-opacity: 0;\n		stroke: none;\n	}\n\n	.group-node.group > .text-area {\n		display: none;\n  	}\n	/*.group-node.group:hover {\n		fill: rgb(0,0,255);\n		stroke-width: 1px;\n		stroke-dasharray: 5,3;\n		stroke: gray;\n		fill-opacity: 0.1;\n	}*/\n\n	.group-node.complex {\n		fill: rgb(180,180,100);\n	}\n\n	.group-node.complex > .text-area {\n		display: none;\n  	}\n	/*.group-node.complex:hover {\n		fill: rgb(255,0,0);\n		fill-opacity: 0.05;\n	}*/	\n\n  	.group-node.pathway {\n		fill: rgb(0,255,0);\n		stroke-dasharray: 5,3;\n	}\n	/*.group-node.pathway:hover {\n		fill: rgb(0,255,0);\n		fill-opacity: 0.2;\n	}*/\n	.group-node.pathway > .text-area {\n		fill: rgb(20,150,30);\n		stroke: rgb(20,150,30);\n  }\n\n  .cellular-component {\n		fill-opacity: 0;\n		stroke: silver;\n	}\n\n  .graphical-line {\n		fill:none;\n		stroke: black; \n		stroke-width: 1px; \n	}\n\n	.interaction {\n		fill:none;\n		stroke: black; \n		stroke-width: 1px; \n	}\n\n	marker {\n		/* this is what should work per the spec\n		   stroke-dasharray: none; */\n		/* but I need to add this to make it work in Safari */\n		stroke-dasharray: 9999999999999999999999999;\n	}\n\n  .marker-end {\n    -webkit-transform: rotate(180deg);\n    -webkit-transform-origin: 50% 50%;\n\n    -o-transform: rotate(180deg); \n    -o-transform-origin: 50% 50%;\n\n    transform: rotate(180deg);\n    transform-origin: 50% 50%;\n  }\n\n	.solid-stroke {\n		/* this is what should work per the spec\n		   stroke-dasharray: none; */\n		/* but I need to add this to make it work in Safari */\n		stroke-dasharray: 9999999999999999999999999;\n	}\n\n	.dashed-stroke {\n		stroke-dasharray: 5,3;\n	}\n\n  .highlighted-node {\n		fill: yellow;\n    fill-opacity: 0.2;\n		stroke: orange; \n    stroke-width: 3px;\n  }\n",pathvisioNS["tmp/pathvisiojs.svg"]='<svg id="pathvisiojs-diagram" version="1.1" baseProfile="full" xmlns="http://www.w3.org/1999/xlink" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:ev="http://www.w3.org/2001/xml-events" width="100%" height="100%" style="display: inline; width: inherit; min-width: inherit; max-width: inherit; height: inherit; min-height: inherit; max-height: inherit; " preserveAspectRatio="xMidYMid" onmouseup="svgPanZoom.handleMouseUp(evt)" onmousedown="svgPanZoom.handleMouseDown(evt)" onmousemove="svgPanZoom.handleMouseMove(evt)" onmouseleave="svgPanZoom.handleMouseUp(evt)" xlink="http://www.w3.org/1999/xlink" ev="http://www.w3.org/2001/xml-events"><g><desc>This SVG file contains all the graphical elements (markers and symbols in defs as well as\nstyle data) used by the program pathvisiojs, which has two components:\n1) a viewer for transforming GPML biological pathway data into an SVG visual representation and\n2) an editor for creating both views and models for biological pathways.</desc></g><title>pathvisiojs diagram</title><defs><marker id="shape-library-markers-arrow-svg-start-default" preserveAspectRatio="none" viewBox="0 0 12 12" markerWidth="12" markerHeight="12" markerUnits="strokeWidth" orient="auto" refX="0" refY="6"><g id="g-src-shape-library-markers-arrow-svg-start-default" class="solid-stroke default-fill-color">\n\n	<!-- arrow markers: triangular polygons, no stroke -->\n\n	<rect class="board-fill-color" stroke="none" x="0" y="5.4" width="2" height="1.2"></rect>\n	<polygon stroke-width="0" points="12,11 0,6 12,1"></polygon>\n\n</g></marker><marker id="shape-library-markers-arrow-svg-end-default" preserveAspectRatio="none" viewBox="0 0 12 12" markerWidth="12" markerHeight="12" markerUnits="strokeWidth" orient="auto" refX="12" refY="6"><g id="g-src-shape-library-markers-arrow-svg-end-default" class="solid-stroke default-fill-color" transform="rotate(180, 6, 6)">\n\n	<!-- arrow markers: triangular polygons, no stroke -->\n\n	<rect class="board-fill-color" stroke="none" x="0" y="5.4" width="2" height="1.2"></rect>\n	<polygon stroke-width="0" points="12,11 0,6 12,1"></polygon>\n\n</g></marker><marker id="shape-library-markers-mim-necessary-stimulation-svg-start-default" preserveAspectRatio="none" viewBox="0 0 16 12" markerWidth="16" markerHeight="12" markerUnits="strokeWidth" orient="auto" refX="0" refY="6"><g id="g-src-shape-library-markers-mim-necessary-stimulation-svg-start-default" class="board-fill-color default-stroke-color solid-stroke">\n\n	<!-- mim-necessary-stimulation markers: triangular polygons, drawing-board fill, default color stroke; and vertical line -->\n\n	<rect class="board-fill-color" stroke="none" x="0" y="5.4" width="2" height="1.2"></rect>\n	<line fill="none" stroke-width="1" x1="14" y1="0" x2="14" y2="12"></line>\n	<line fill="none" stroke="none" x1="16" y1="6" x2="16" y2="6"></line> <!-- dummy point -->\n	<polygon stroke-width="1" points="0,6 9,11 9,1"></polygon>\n\n</g></marker><marker id="shape-library-markers-mim-necessary-stimulation-svg-end-default" preserveAspectRatio="none" viewBox="0 0 16 12" markerWidth="16" markerHeight="12" markerUnits="strokeWidth" orient="auto" refX="16" refY="6"><g id="g-src-shape-library-markers-mim-necessary-stimulation-svg-end-default" class="board-fill-color default-stroke-color solid-stroke" transform="rotate(180, 8, 6)">\n\n	<!-- mim-necessary-stimulation markers: triangular polygons, drawing-board fill, default color stroke; and vertical line -->\n\n	<rect class="board-fill-color" stroke="none" x="0" y="5.4" width="2" height="1.2"></rect>\n	<line fill="none" stroke-width="1" x1="14" y1="0" x2="14" y2="12"></line>\n	<line fill="none" stroke="none" x1="16" y1="6" x2="16" y2="6"></line> <!-- dummy point -->\n	<polygon stroke-width="1" points="0,6 9,11 9,1"></polygon>\n\n</g></marker><marker id="shape-library-markers-mim-binding-svg-start-default" preserveAspectRatio="none" viewBox="0 0 12 12" markerWidth="12" markerHeight="12" markerUnits="strokeWidth" orient="auto" refX="0" refY="6"><g id="g-src-shape-library-markers-mim-binding-svg-start-default" class="solid-stroke default-fill-color">\n\n	<!-- mim-binding markers: four-point polygon, no stroke -->\n\n	<rect class="board-fill-color" stroke="none" x="0" y="5.4" width="2" height="1.2"></rect>\n	<polygon stroke-width="0" points="12,12 0,6 12,0 5,6 "></polygon>\n\n</g></marker><marker id="shape-library-markers-mim-binding-svg-end-default" preserveAspectRatio="none" viewBox="0 0 12 12" markerWidth="12" markerHeight="12" markerUnits="strokeWidth" orient="auto" refX="12" refY="6"><g id="g-src-shape-library-markers-mim-binding-svg-end-default" class="solid-stroke default-fill-color" transform="rotate(180, 6, 6)">\n\n	<!-- mim-binding markers: four-point polygon, no stroke -->\n\n	<rect class="board-fill-color" stroke="none" x="0" y="5.4" width="2" height="1.2"></rect>\n	<polygon stroke-width="0" points="12,12 0,6 12,0 5,6 "></polygon>\n\n</g></marker><marker id="shape-library-markers-mim-conversion-svg-start-default" preserveAspectRatio="none" viewBox="0 0 12 12" markerWidth="12" markerHeight="12" markerUnits="strokeWidth" orient="auto" refX="0" refY="6"><g id="g-src-shape-library-markers-mim-conversion-svg-start-default" class="solid-stroke default-fill-color">\n\n	<!-- mim-conversion markers: triangular polygons, no stroke -->\n\n	<rect class="board-fill-color" stroke="none" x="0" y="5.4" width="2" height="1.2"></rect>\n	<polygon stroke-width="0" points="12,11 0,6 12,1"></polygon>\n\n</g></marker><marker id="shape-library-markers-mim-conversion-svg-end-default" preserveAspectRatio="none" viewBox="0 0 12 12" markerWidth="12" markerHeight="12" markerUnits="strokeWidth" orient="auto" refX="12" refY="6"><g id="g-src-shape-library-markers-mim-conversion-svg-end-default" class="solid-stroke default-fill-color" transform="rotate(180, 6, 6)">\n\n	<!-- mim-conversion markers: triangular polygons, no stroke -->\n\n	<rect class="board-fill-color" stroke="none" x="0" y="5.4" width="2" height="1.2"></rect>\n	<polygon stroke-width="0" points="12,11 0,6 12,1"></polygon>\n\n</g></marker><marker id="shape-library-markers-mim-stimulation-svg-start-default" preserveAspectRatio="none" viewBox="0 0 12 12" markerWidth="12" markerHeight="12" markerUnits="strokeWidth" orient="auto" refX="0" refY="6"><g id="g-src-shape-library-markers-mim-stimulation-svg-start-default" class="board-fill-color default-stroke-color solid-stroke">\n\n	<!-- mim-stimulation markers: triangular polygons, drawing-board fill, default color stroke -->\n\n	<rect class="board-fill-color" stroke="none" x="0" y="5.4" width="2" height="1.2"></rect>\n	<line stroke="none" fill="none" x1="12" y1="6" x2="12" y2="6"></line> <!-- dummy point -->\n	<polygon stroke-width="1" points="0,6 11,11 11,1"></polygon>\n\n</g></marker><marker id="shape-library-markers-mim-stimulation-svg-end-default" preserveAspectRatio="none" viewBox="0 0 12 12" markerWidth="12" markerHeight="12" markerUnits="strokeWidth" orient="auto" refX="12" refY="6"><g id="g-src-shape-library-markers-mim-stimulation-svg-end-default" class="board-fill-color default-stroke-color solid-stroke" transform="rotate(180, 6, 6)">\n\n	<!-- mim-stimulation markers: triangular polygons, drawing-board fill, default color stroke -->\n\n	<rect class="board-fill-color" stroke="none" x="0" y="5.4" width="2" height="1.2"></rect>\n	<line stroke="none" fill="none" x1="12" y1="6" x2="12" y2="6"></line> <!-- dummy point -->\n	<polygon stroke-width="1" points="0,6 11,11 11,1"></polygon>\n\n</g></marker><marker id="shape-library-markers-mim-modification-svg-start-default" preserveAspectRatio="none" viewBox="0 0 12 12" markerWidth="12" markerHeight="12" markerUnits="strokeWidth" orient="auto" refX="0" refY="6"><g id="g-src-shape-library-markers-mim-modification-svg-start-default" class="default-fill-color solid-stroke">\n\n	<!-- mim-modification markers: four-point polygon, no stroke -->\n\n	<rect class="board-fill-color" stroke="none" x="0" y="5.4" width="2" height="1.2"></rect>\n	<polygon stroke-width="0" points="12,12 0,6 12,0 5,6 "></polygon>\n\n</g></marker><marker id="shape-library-markers-mim-modification-svg-end-default" preserveAspectRatio="none" viewBox="0 0 12 12" markerWidth="12" markerHeight="12" markerUnits="strokeWidth" orient="auto" refX="12" refY="6"><g id="g-src-shape-library-markers-mim-modification-svg-end-default" class="default-fill-color solid-stroke" transform="rotate(180, 6, 6)">\n\n	<!-- mim-modification markers: four-point polygon, no stroke -->\n\n	<rect class="board-fill-color" stroke="none" x="0" y="5.4" width="2" height="1.2"></rect>\n	<polygon stroke-width="0" points="12,12 0,6 12,0 5,6 "></polygon>\n\n</g></marker><marker id="shape-library-markers-mim-catalysis-svg-start-default" preserveAspectRatio="none" viewBox="0 0 12 12" markerWidth="12" markerHeight="12" markerUnits="strokeWidth" orient="auto" refX="0" refY="6"><g id="g-src-shape-library-markers-mim-catalysis-svg-start-default" class="board-fill-color default-stroke-color solid-stroke">\n\n	<!-- mim-catalysis markers: circle, drawing-board fill and default color stroke -->\n\n	<circle cx="6.0" cy="6" r="5.3px" stroke-width="1px"></circle>\n\n</g></marker><marker id="shape-library-markers-mim-catalysis-svg-end-default" preserveAspectRatio="none" viewBox="0 0 12 12" markerWidth="12" markerHeight="12" markerUnits="strokeWidth" orient="auto" refX="12" refY="6"><g id="g-src-shape-library-markers-mim-catalysis-svg-end-default" class="board-fill-color default-stroke-color solid-stroke" transform="rotate(180, 6, 6)">\n\n	<!-- mim-catalysis markers: circle, drawing-board fill and default color stroke -->\n\n	<circle cx="6.0" cy="6" r="5.3px" stroke-width="1px"></circle>\n\n</g></marker><marker id="shape-library-markers-mim-inhibition-svg-start-default" preserveAspectRatio="none" viewBox="0 0 10 20" markerWidth="10" markerHeight="20" markerUnits="strokeWidth" orient="auto" refX="0" refY="10"><g id="g-src-shape-library-markers-mim-inhibition-svg-start-default" class="board-fill-color default-stroke-color solid-stroke">\n\n	<!-- mim-inhibition markers: vertical line; and extended drawing-board rect -->\n	\n	<rect stroke="none" x="0" y="9" width="8" height="2"></rect>\n	<line fill="none" stroke-width="1.8" x1="7" y1="0" x2="7" y2="20"></line>\n\n</g></marker><marker id="shape-library-markers-mim-inhibition-svg-end-default" preserveAspectRatio="none" viewBox="0 0 10 20" markerWidth="10" markerHeight="20" markerUnits="strokeWidth" orient="auto" refX="10" refY="10"><g id="g-src-shape-library-markers-mim-inhibition-svg-end-default" class="board-fill-color default-stroke-color solid-stroke" transform="rotate(180, 5, 10)">\n\n	<!-- mim-inhibition markers: vertical line; and extended drawing-board rect -->\n	\n	<rect stroke="none" x="0" y="9" width="8" height="2"></rect>\n	<line fill="none" stroke-width="1.8" x1="7" y1="0" x2="7" y2="20"></line>\n\n</g></marker><marker id="shape-library-markers-mim-cleavage-svg-start-default" preserveAspectRatio="none" viewBox="0 0 20 30" markerWidth="20" markerHeight="30" markerUnits="strokeWidth" orient="auto" refX="9" refY="15"><g id="g-src-shape-library-markers-mim-cleavage-svg-start-default" class="board-fill-color default-stroke-color solid-stroke">\n\n	<!-- mim-cleavage markers: two lines and extended drawing-board rect -->\n\n	<rect stroke="none" x="0" y="14.3" width="18.4" height="1.4"></rect>\n	<line fill="none" stroke-width="1" x1="18" y1="14.5" x2="18" y2="30"></line>	\n	<line fill="none" stroke-width="1" x1="18" y1="30" x2="0" y2="0"></line>	\n\n\n</g></marker><marker id="shape-library-markers-mim-cleavage-svg-end-default" preserveAspectRatio="none" viewBox="0 0 20 30" markerWidth="20" markerHeight="30" markerUnits="strokeWidth" orient="auto" refX="10" refY="15"><g id="g-src-shape-library-markers-mim-cleavage-svg-end-default" class="board-fill-color default-stroke-color solid-stroke" transform="rotate(180, 10, 15)">\n\n	<!-- mim-cleavage markers: two lines and extended drawing-board rect -->\n\n	<rect stroke="none" x="0" y="14.3" width="18.4" height="1.4"></rect>\n	<line fill="none" stroke-width="1" x1="18" y1="14.5" x2="18" y2="30"></line>	\n	<line fill="none" stroke-width="1" x1="18" y1="30" x2="0" y2="0"></line>	\n\n\n</g></marker><marker id="shape-library-markers-mim-covalent-bond-svg-start-default" preserveAspectRatio="none" viewBox="0 0 12 12" markerWidth="12" markerHeight="12" markerUnits="strokeWidth" orient="auto" refX="-0.5" refY="6"><g id="g-src-shape-library-markers-mim-covalent-bond-svg-start-default" class="solid-stroke default-fill-color">\n\n	<!-- mim-covalent-bond markers: not much to see here! -->\n	<rect x="0" y="0" width="0" height="0" stroke="none" fill="none" stroke-width="0"></rect>\n\n</g></marker><marker id="shape-library-markers-mim-covalent-bond-svg-end-default" preserveAspectRatio="none" viewBox="0 0 12 12" markerWidth="12" markerHeight="12" markerUnits="strokeWidth" orient="auto" refX="11" refY="6"><g id="g-src-shape-library-markers-mim-covalent-bond-svg-end-default" class="solid-stroke default-fill-color" transform="rotate(180, 6, 6)">\n\n	<!-- mim-covalent-bond markers: not much to see here! -->\n	<rect x="0" y="0" width="0" height="0" stroke="none" fill="none" stroke-width="0"></rect>\n\n</g></marker><marker id="shape-library-markers-mim-transcription-translation-svg-start-default" preserveAspectRatio="none" viewBox="0 0 20 24" markerWidth="20" markerHeight="24" markerUnits="strokeWidth" orient="auto" refX="0" refY="12"><g id="g-src-shape-library-markers-mim-transcription-translation-svg-start-default" class="board-fill-color default-stroke-color solid-stroke">\n\n	<!-- mim-transcription-translation markers: two lines and an open trigular polygon, plus extended drawing-board rect -->\n\n	<rect stroke="none" x="0" y="11" width="12" height="2"></rect>\n	<line fill="none" stroke-width="1" x1="15" y1="12" x2="15" y2="5"></line>\n	<line fill="none" stroke-width="1" x1="15.5" y1="5" x2="8" y2="5"></line>\n	<polygon stroke-width="1" points="0,5 8,1 8,9"></polygon>\n\n</g></marker><marker id="shape-library-markers-mim-transcription-translation-svg-end-default" preserveAspectRatio="none" viewBox="0 0 20 24" markerWidth="20" markerHeight="24" markerUnits="strokeWidth" orient="auto" refX="20" refY="12"><g id="g-src-shape-library-markers-mim-transcription-translation-svg-end-default" class="board-fill-color default-stroke-color solid-stroke" transform="rotate(180, 10, 12)">\n\n	<!-- mim-transcription-translation markers: two lines and an open trigular polygon, plus extended drawing-board rect -->\n\n	<rect stroke="none" x="0" y="11" width="12" height="2"></rect>\n	<line fill="none" stroke-width="1" x1="15" y1="12" x2="15" y2="5"></line>\n	<line fill="none" stroke-width="1" x1="15.5" y1="5" x2="8" y2="5"></line>\n	<polygon stroke-width="1" points="0,5 8,1 8,9"></polygon>\n\n</g></marker><marker id="shape-library-markers-mim-gap-svg-start-default" preserveAspectRatio="none" viewBox="0 0 12 12" markerWidth="12" markerHeight="12" markerUnits="strokeWidth" orient="auto" refX="0" refY="6"><g id="g-src-shape-library-markers-mim-gap-svg-start-default" class="board-fill-color solid-stroke">\n\n	<!-- mim-gap markers: just an extended drawing-board rect -->\n	<!-- \n	TODO This could be refactored to make the shape match the viewbox.\n	It can overlap the side of the shape, blanking out a small part of it when the edge is at an angle.\n	-->\n\n	<rect stroke="none" x="0" y="5.3" width="8" height="1.4"></rect>\n\n</g></marker><marker id="shape-library-markers-mim-gap-svg-end-default" preserveAspectRatio="none" viewBox="0 0 12 12" markerWidth="12" markerHeight="12" markerUnits="strokeWidth" orient="auto" refX="12" refY="6"><g id="g-src-shape-library-markers-mim-gap-svg-end-default" class="board-fill-color solid-stroke" transform="rotate(180, 6, 6)">\n\n	<!-- mim-gap markers: just an extended drawing-board rect -->\n	<!-- \n	TODO This could be refactored to make the shape match the viewbox.\n	It can overlap the side of the shape, blanking out a small part of it when the edge is at an angle.\n	-->\n\n	<rect stroke="none" x="0" y="5.3" width="8" height="1.4"></rect>\n\n</g></marker><marker id="shape-library-markers-t-bar-svg-start-default" preserveAspectRatio="none" viewBox="0 0 10 20" markerWidth="10" markerHeight="20" markerUnits="strokeWidth" orient="auto" refX="0" refY="10"><g id="g-src-shape-library-markers-t-bar-svg-start-default" class="board-fill-color default-stroke-color solid-stroke">\n\n        <!-- t-bar markers: vertical line; and extended drawing-board rect -->\n	\n	<rect stroke="none" x="0" y="9" width="8" height="2"></rect>\n	<line fill="none" stroke-width="1.8" x1="7" y1="0" x2="7" y2="20"></line>\n\n</g></marker><marker id="shape-library-markers-t-bar-svg-end-default" preserveAspectRatio="none" viewBox="0 0 10 20" markerWidth="10" markerHeight="20" markerUnits="strokeWidth" orient="auto" refX="10" refY="10"><g id="g-src-shape-library-markers-t-bar-svg-end-default" class="board-fill-color default-stroke-color solid-stroke" transform="rotate(180, 5, 10)">\n\n        <!-- t-bar markers: vertical line; and extended drawing-board rect -->\n	\n	<rect stroke="none" x="0" y="9" width="8" height="2"></rect>\n	<line fill="none" stroke-width="1.8" x1="7" y1="0" x2="7" y2="20"></line>\n\n</g></marker><marker id="shape-library-markers-none-svg-start-default" preserveAspectRatio="none" viewBox="0 0 0 0" markerWidth="0" markerHeight="0" markerUnits="strokeWidth" orient="auto" refX="0" refY="6"><g id="g-src-shape-library-markers-none-svg-start-default" class="board-fill-color board-stroke-color node shape">\n\n	<rect x="0" y="0" width="0" height="0" stroke="none" fill="none" stroke-width="0"></rect>\n\n</g></marker><marker id="shape-library-markers-none-svg-end-default" preserveAspectRatio="none" viewBox="0 0 0 0" markerWidth="0" markerHeight="0" markerUnits="strokeWidth" orient="auto" refX="11" refY="6"><g id="g-src-shape-library-markers-none-svg-end-default" class="board-fill-color board-stroke-color node shape" transform="rotate(180, 0, 0)">\n\n	<rect x="0" y="0" width="0" height="0" stroke="none" fill="none" stroke-width="0"></rect>\n\n</g></marker><marker id="shape-library-markers-mim-branching-left-svg-start-default" preserveAspectRatio="none" viewBox="0 0 12 12" markerWidth="12" markerHeight="12" markerUnits="strokeWidth" orient="auto" refX="0.4" refY="6"><g id="g-src-shape-library-markers-mim-branching-left-svg-start-default" class="board-fill-color default-stroke-color solid-stroke">\n\n	<!-- mim-branching-left markers: line and extended drawing-board rect -->\n\n	<rect stroke="none" x="0.4" y="5.3" width="3.1" height="1.4"></rect>\n	<line fill="none" stroke-width="1" x1="3.9" y1="6.2" x2="0.2" y2="0"></line>	\n\n</g></marker><marker id="shape-library-markers-mim-branching-left-svg-end-default" preserveAspectRatio="none" viewBox="0 0 12 12" markerWidth="12" markerHeight="12" markerUnits="strokeWidth" orient="auto" refX="11.6" refY="6"><g id="g-src-shape-library-markers-mim-branching-left-svg-end-default" class="board-fill-color default-stroke-color solid-stroke" transform="rotate(180, 6, 6)">\n\n	<!-- mim-branching-left markers: line and extended drawing-board rect -->\n\n	<rect stroke="none" x="0.4" y="5.3" width="3.1" height="1.4"></rect>\n	<line fill="none" stroke-width="1" x1="3.9" y1="6.2" x2="0.2" y2="0"></line>	\n\n</g></marker><marker id="shape-library-markers-mim-branching-right-svg-start-default" preserveAspectRatio="none" viewBox="0 0 4 12" markerWidth="4" markerHeight="12" markerUnits="strokeWidth" orient="auto" refX="0.4" refY="6"><g id="g-src-shape-library-markers-mim-branching-right-svg-start-default" class="board-fill-color default-stroke-color solid-stroke">\n\n	<!-- mim-branching-right markers: line and extended drawing-board rect -->\n\n	<rect stroke="none" x="0.4" y="5.3" width="3.1" height="1.4"></rect>\n	<line fill="none" stroke-width="1" x1="0.2" y1="12" x2="3.9" y2="5.8"></line>	\n\n</g></marker><marker id="shape-library-markers-mim-branching-right-svg-end-default" preserveAspectRatio="none" viewBox="0 0 4 12" markerWidth="4" markerHeight="12" markerUnits="strokeWidth" orient="auto" refX="3.6" refY="6"><g id="g-src-shape-library-markers-mim-branching-right-svg-end-default" class="board-fill-color default-stroke-color solid-stroke" transform="rotate(180, 2, 6)">\n\n	<!-- mim-branching-right markers: line and extended drawing-board rect -->\n\n	<rect stroke="none" x="0.4" y="5.3" width="3.1" height="1.4"></rect>\n	<line fill="none" stroke-width="1" x1="0.2" y1="12" x2="3.9" y2="5.8"></line>	\n\n</g></marker><style type="text/css">	svg {\n		color-interpolation: auto;\n		image-rendering: auto;\n		shape-rendering: auto;\n		vector-effect: non-scaling-stroke;\n                background: white;\n	/* removed fill and stroke since they override marker specs */\n	/*	fill: white;\n    		stroke: black; */\n	}\n\n	/* default color for pathway elements */\n	.default-fill-color {\n		fill: black; \n	}\n	.default-stroke-color {\n		stroke: black;\n	}\n	\n	/* default color of the background drawing board */ 	\n	.board-fill-color {\n		fill: white;\n	}\n	.board-stroke-color {\n		stroke: white;\n	}\n\n	.text-area {\n		font-family: Sans-Serif, Helvetica, Arial;\n		text-align: center;\n		vertical-align: middle;\n		font-size: 10px;\n		fill: black;\n		fill-opacity: 1;\n		stroke: none;\n	}\n\n	.citation {\n		font-family: Sans-Serif, Helvetica, Arial;\n		text-align: center;\n		vertical-align: top;\n		font-size: 7px;\n		fill: #999999;\n		fill-opacity: 1;\n		stroke: none;\n	}\n\n	.info-box {\n		font-family: Sans-Serif;\n		font-size: 10px;\n		fill: black;\n		stroke: none;\n		text-align: left;\n		vertical-align: top;\n	}\n\n	.info-box-item-property-name {\n		font-weight: bold;\n	}\n\n	.info-box-item-property-value {\n	}\n\n	.data-node {\n		text-align: right;\n		fill-opacity: 1;\n		fill: white;\n		stroke: black;\n		stroke-width: 1;\n		stroke-dasharray: 0;\n		stroke-miterlimit: 1;\n    		pointer-events:auto;\n	}\n	.data-node:hover {\n	 	cursor: pointer;\n	}\n	\n	.has-xref {\n	}\n\n	.data-node.gene-product {\n	}\n\n	.metabolite {\n		stroke: blue;\n	}\n\n	.data-node.metabolite &gt; .text-area {\n		fill: blue;\n		fill-opacity: 1;\n		stroke: none;\n	}\n\n	.data-node.pathway {\n		stroke: none;\n		fill-opacity: 0;\n	}\n\n	.data-node.pathway &gt; .text-area {\n		fill: rgb(20,150,30);\n		fill-opacity: 1;\n		font-size: 12px;\n		font-weight: bold;\n	}\n\n	.data-node.protein {\n	}\n\n	.data-node.rna {\n	}\n\n	.data-node.unknown {\n	}\n\n	.label {\n		stroke: null;\n		stroke-width: 0;\n		fill-opacity: 0;\n		stroke-dasharray: 0;\n		stroke-miterlimit: 1;\n	}\n\n	.shape {\n		fill-opacity: 0;\n		stroke: black;\n		stroke-dasharray: 0;\n		stroke-miterlimit: 1;\n	}\n\n	.shape.none {\n		fill: none;\n		fill-opacity: 0;\n		stroke: none;\n	}\n\n	g.group-node &gt; .shape {\n		fill-opacity: 0.098;\n		stroke: gray;\n		stroke-miterlimit: 1;\n		stroke-width: 1px;\n    		pointer-events:none;\n	}\n\n	.group-node {\n		fill-opacity: 0.098;\n		stroke: gray;\n		stroke-miterlimit: 1;\n		stroke-width: 1px;\n    		pointer-events:none;\n	}\n\n	.group-node &gt; .text-area {\n		fill-opacity: 0.4;\n		font-family: Serif, Times;\n		font-size: 32px;\n		fill: black;\n		stroke-width: 0;\n		font-weight: bold;\n  	}	\n\n	.group-node.none {\n		fill: rgb(180,180,100);\n		stroke-dasharray: 5,3;\n	}\n\n	.group-node.none &gt; .text-area {\n		display: none;\n  	}	\n\n	/*.group-node.none:hover {\n		fill: rgb(255,180,100);\n		fill-opacity: 0.05;\n	}*/\n\n	.group-node.group {\n		fill-opacity: 0;\n		stroke: none;\n	}\n\n	.group-node.group &gt; .text-area {\n		display: none;\n  	}\n	/*.group-node.group:hover {\n		fill: rgb(0,0,255);\n		stroke-width: 1px;\n		stroke-dasharray: 5,3;\n		stroke: gray;\n		fill-opacity: 0.1;\n	}*/\n\n	.group-node.complex {\n		fill: rgb(180,180,100);\n	}\n\n	.group-node.complex &gt; .text-area {\n		display: none;\n  	}\n	/*.group-node.complex:hover {\n		fill: rgb(255,0,0);\n		fill-opacity: 0.05;\n	}*/	\n\n  	.group-node.pathway {\n		fill: rgb(0,255,0);\n		stroke-dasharray: 5,3;\n	}\n	/*.group-node.pathway:hover {\n		fill: rgb(0,255,0);\n		fill-opacity: 0.2;\n	}*/\n	.group-node.pathway &gt; .text-area {\n		fill: rgb(20,150,30);\n		stroke: rgb(20,150,30);\n  }\n\n  .cellular-component {\n		fill-opacity: 0;\n		stroke: silver;\n	}\n\n  .graphical-line {\n		fill:none;\n		stroke: black; \n		stroke-width: 1px; \n	}\n\n	.interaction {\n		fill:none;\n		stroke: black; \n		stroke-width: 1px; \n	}\n\n	marker {\n		/* this is what should work per the spec\n		   stroke-dasharray: none; */\n		/* but I need to add this to make it work in Safari */\n		stroke-dasharray: 9999999999999999999999999;\n	}\n\n  .marker-end {\n    -webkit-transform: rotate(180deg);\n    -webkit-transform-origin: 50% 50%;\n\n    -o-transform: rotate(180deg); \n    -o-transform-origin: 50% 50%;\n\n    transform: rotate(180deg);\n    transform-origin: 50% 50%;\n  }\n\n	.solid-stroke {\n		/* this is what should work per the spec\n		   stroke-dasharray: none; */\n		/* but I need to add this to make it work in Safari */\n		stroke-dasharray: 9999999999999999999999999;\n	}\n\n	.dashed-stroke {\n		stroke-dasharray: 5,3;\n	}\n\n  .highlighted-node {\n		fill: yellow;\n    fill-opacity: 0.2;\n		stroke: orange; \n    stroke-width: 3px;\n  }\n</style></defs><filter id="highlight" width="150%" height="150%"><feOffset result="offOut" in="SourceGraphic" dx="30" dy="30"></feOffset><feGaussianBlur result="blurOut" in="offOut" stdDeviation="10"></feGaussianBlur><feBlend in="SourceGraphic" in2="blurOut" mode="normal"></feBlend></filter><g id="viewport" transform="matrix(0.6710888444694338, 0, 0, 0.6710888444694338, 364.8176552543344, 20) "></g></svg>\n',function(){window.console||(window.console={});
for(var a=["log","info","warn","error","debug","trace","dir","group","groupCollapsed","groupEnd","time","timeEnd","profile","profileEnd","dirxml","assert","count","markTimeline","timeStamp","clear"],b=0;b<a.length;b++)window.console[a[b]]||(window.console[a[b]]={})}();var pathvisiojs=function(){"use strict";function a(a){if(!a.container)throw new Error("No container selector specified to indicate where to insert the diagram.");if(!a.sourceData[0].uri)throw new Error("No sourceData uri specified.");var b=d3.map(pathvisiojs.config).entries(),c=function(b,c){a.hasOwnProperty(b.key)&&(pathvisiojs.config[b.key]=a[b.key]),c(null)};async.each(b,c,function(){pathvisiojs.view.pathwayDiagram.load(a)})}return{load:a}}();pathvisiojs.utilities=function(){"use strict";function a(){for(var a={},b=arguments.length,c=0;b>c;c++)for(var d in arguments[c])arguments[c].hasOwnProperty(d)&&(a[d]=arguments[c][d]);return a}function b(a){function c(a,b,c){var d,e,f={};for(d in b)e=b[d],d in a&&(a[d]===e||d in f&&f[d]===e)||(a[d]=c?c(e):e);return a}if(!a||"object"!=typeof a||"[object Function]"===Object.prototype.toString.call(a))return a;if(a.nodeType&&"cloneNode"in a)return a.cloneNode(!0);if(a instanceof Date)return new Date(a.getTime());if(a instanceof RegExp)return new RegExp(a);var d,e,f;if(a instanceof Array)for(d=[],e=0,f=a.length;f>e;++e)e in a&&d.push(b(a[e]));else d=a.constructor?new a.constructor:{};return c(d,a,b)}function c(a){var b=d3.select(a).node();return d3.select(b.parentNode.insertBefore(b.cloneNode(!0),b.nextSibling))}function d(a){var b=null;return"Object"===e(a)?(b=[],b.push(a),b):"Array"===e(a)?a:"String"===e(a)?(b=[],b.push(a),b):void 0}function e(a){var b;return"[object Object]"===Object.prototype.toString.call(a)?b="Object":"[object Array]"===Object.prototype.toString.call(a)?b="Array":"[object String]"===Object.prototype.toString.call(a)&&(b="String"),b}function f(a){var b,c=new RegExp("[\0-]+"),d=c.test(a);return b=d?"ltr":"rtl"}function g(a){var b=decodeURIComponent((new RegExp("[?|&]"+a+"="+"([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||null;return b?b:(console.warn('Warning: URL parameter "'+a+'" is null.'),null)}function h(){var a=630,b=460;return document.body&&document.body.width&&(a=document.body.width,b=document.body.height),"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.width&&(a=document.documentElement.width,b=document.documentElement.height),window.innerWidth&&window.innerHeight&&(a=window.innerWidth,b=window.innerHeight),{width:a,height:b}}function i(a,b){for(var c=[],d=0;d<a.length;d++)b.indexOf(a[d])>-1&&c.push(a[d]);return c}function j(){var a=navigator.userAgent.toLowerCase();return-1!=a.indexOf("msie")?parseInt(a.split("msie")[1]):!1}function k(a){var b=/(?:(?=[\s`!()\[\]{};:'".,<>?«»“”‘’])|\b)((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/|[a-z0-9.\-]+[.](?:com|org|net))(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))*(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]|\b))/gi;return b.test(a)}function l(a){return!isNaN(parseFloat(a))&&isFinite(a)}function m(a){return a=a.trim(),"WP"===a.substr(0,2).toUpperCase()&&l(a.substr(a.length-1))?!0:!1}function n(a,b){var c=function(a,b){var c=document.createElement("script");c.src=a,c.onload=c.onreadystatechange=function(){c.onreadystatechange=c.onload=null,/MSIE ([6-9]+\.\d+);/.test(navigator.userAgent)?window.setTimeout(function(){b()},8,this):b()};var d=document.getElementsByTagName("head")[0];(d||document.body).appendChild(c)};!function(){0!=a.length?c(a.shift(),arguments.callee):b&&b()}()}function o(a,b,c){if(c>=a.length)for(var d=c-a.length;d--+1;)a.push(void 0);return a.splice(c,0,a.splice(b,1)[0]),a}function p(a){return a.split(/\r\n|\r|\n/g)}function q(a){var b=/\W/gi,c=a.replace(b,"");return c}Element.prototype.getElementWidth=function(){return"undefined"!=typeof this.clip?this.clip.width:this.style.pixelWidth?this.style.pixelWidth:this.width},Element.prototype.getElementHeight=function(){return"undefined"!=typeof this.clip?this.clip.width:this.style.pixelHeight?this.style.pixelHeight:this.height};var r=function(a){return a%2};return{clone:b,cloneNode:c,collect:a,convertToArray:d,getObjectType:e,getTextDirection:f,getUriParam:g,getWindowDimensions:h,isIE:j,intersect:i,isNumber:l,isOdd:r,isUri:k,isWikiPathwaysId:m,loadScripts:n,moveArrayItem:o,splitStringByNewLine:p,strToHtmlId:q}}(),pathvisiojs.config={},pathvisiojs.config.gpmlSourceUriStub="/wpi/wpi.php?action=downloadFile&type=gpml&pwTitle=Pathway:",pathvisiojs.config.bridgedbLinkOutsUriStub="/wpi/extensions/bridgedb.php/",pathvisiojs.config.bridgedbDatasources="/wpi/extensions/PathwayViewer/datasources.txt",pathvisiojs.config.diagramLoadingIconUri="/wpi/extensions/PathwayViewer/img/loading.gif",pathvisiojs.config.diagramNotAvailableIconUri="/wpi/extensions/PathwayViewer/img/imageNotAvailable.jpg",pathvisiojs.config.imgDiagramUriStub="/wpi.php?action=downloadFile&type=png&pwTitle=Pathway:",pathvisiojs.config.pathwaySearchUriStub="/index.php?title=Special:SearchPathways&doSearch=1&query=",pathvisiojs.data=function(){"use strict";function a(a,b){var c=a.uri;a.object;var d=a.fileType;if(!c)return new Error("No uri specified.");if(!d)return new Error("No fileType specified.");if("gpml"!==d)throw new Error("Cannot get jGpml from the specified input.");pathvisiojs.data.gpml.get(a,function(a){pathvisiojs.data.gpml.toPvjson(a,c,function(a){b(a)})})}return{get:a}}(),pathvisiojs.data.bridgedb=function(){"use strict";function a(a,e,f,g,h,i){if(null==e||null==f){var j={header:g,description:h,listItems:["Missing ID and datasource"]};i(j)}else c(function(c){var j=b(f,c),k=j.systemCode;d(a,k,e,function(a){var d,j=[];"undefined"!=typeof a&&(j=a.map(function(a){var e={};return e.title=a.dataSourceName,e.text=a.xRefId,d=b(a.dataSourceName,c),e.priority=d.priority,d.hasOwnProperty("linkoutPattern")&&""!==d.linkoutPattern&&null!==d.linkoutPattern&&(e.uri=d.linkoutPattern.replace("$id",e.text)),e})),j.sort(function(a,b){if(a.priority===b.priority){var c=a.title.toLowerCase(),d=b.title.toLowerCase();return d>c?-1:c>d?1:0}return b.priority-a.priority});var k=d3.nest().key(function(a){return a.title}).entries(j);if(0==k.length){var l="",m=b(f,c);m.hasOwnProperty("linkoutPattern")&&""!==m.linkoutPattern&&null!==m.linkoutPattern&&(l=m.linkoutPattern.replace("$id",e)),k=[{key:f,values:[{priority:"1",text:e,title:f,uri:l}]}]}var n=k.filter(function(a){return a.key==f})[0],o=k.indexOf(n);k=pathvisiojs.utilities.moveArrayItem(k,o,0);var p=n.values.filter(function(a){return a.text==e})[0],q=n.values.indexOf(p);n.values=pathvisiojs.utilities.moveArrayItem(n.values,q,0);var r={header:g,description:h,listItems:k};i(r)})})}function b(a,b){var c=/[^\w]/gi,d=b.filter(function(b){return b.dataSourceName===a})[0];return d||(d=b.filter(function(b){return b.dataSourceName.replace(c,"").toLowerCase()===a.replace(c,"").toLowerCase()})[0]),d}function c(a){d3.tsv(pathvisiojs.config.bridgedbDatasources).response(function(a){return d3.tsv.parseRows(a.responseText,function(a){return{dataSourceName:a[0],systemCode:a[1],websiteUri:a[2],linkoutPattern:a[3],exampleIdentifier:a[4],entityIdentified:a[5],singleSpecies:a[6],priority:a[7],uri:a[8],regex:a[9],officialName:a[10]}})}).get(function(b,c){a(c)})}function d(a,b,c,d){var e=pathvisiojs.config.bridgedbLinkOutsUriStub+encodeURIComponent(a)+"/xrefs/"+encodeURIComponent(b)+"/"+encodeURIComponent(c);d3.tsv(e).response(function(a){return d3.tsv.parseRows(a.responseText,function(a){return{xRefId:a[0],dataSourceName:a[1]}})}).get(function(a,b){d(b)})}return{getXrefAnnotationDataByDataNode:a}}(),pathvisiojs.data.biopax=function(){"use strict";function a(a,b){try{d3.ns.prefix.bp="http://www.biopax.org/owldoc/Level3/",d3.ns.prefix.rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#",d3.ns.qualify("bp:PublicationXref");var c=a.selectAll("PublicationXref"),d={};d.PublicationXref=[];var e;c.each(function(){e={},e.rdfId=d3.select(this).attr("rdf:id").toString(),d.PublicationXref.push(e)}),b(d)}catch(f){throw new Error("Error converting biopax to json: "+f.message)}}return{toPvjson:a}}(),pathvisiojs.data.pvjson=function(){"use strict";function a(a,b){var c=a.uri;a.object;var d=a.fileType;if(!c)return new Error("No uri specified.");if(!d)return new Error("No fileType specified.");if("gpml"!==d)throw new Error("Cannot get jGpml from the specified input.");pathvisiojs.data.gpml.get(a,function(a){pathvisiojs.data.gpml.toPvjson(a,c,function(a){console.log("json"),console.log(a),b(a)})})}return{get:a}}(),pathvisiojs.data.gpml=function(){"use strict";function a(a,b){var c=a.uri,d=a.object,e=a.fileType;if(!c&&!d)return new Error("No sourceData specified.");if(!e)return new Error("No fileType specified.");if("gpml"!==e)throw new Error("Cannot get GPML from the specified input.");9!==pathvisiojs.utilities.isIE()?d3.xml(c,function(a){var c=a.documentElement;b(c)}):async.waterfall([function(a){$?a(null):pathvisiojs.utilities.loadScripts(["http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"],function(){a(null)})},function(a){d3.xhr(c,"application/xml",function(b,c){var d=c.responseText;a(null,d)})},function(a){var c=$.parseXML(a),d=c.documentElement;b(d)}])}function b(a){var b;return"transparent"===a.toLowerCase()?"transparent":(b=new RGBColor(a),b.ok?b.toHex():(console.warn('Could not convert GPML Color value of "'+a+'" to a valid CSS color. Using "#c0c0c0" as a fallback.'),"#c0c0c0"))}function c(a,b){var c;return a!==b?a?(c=new RGBColor(a),c.ok?c.toHex():b):b:b}function d(a,c){var d=b(c);return a.color=d,a.borderColor=d,a.hasOwnProperty("text")&&(a.text.color=d),a}function e(a,b,d){var e;return b!==d&&(e=c(b,d),a.color=e,a.borderColor=e,a.hasOwnProperty("text")&&(a.text.color=e)),a}function f(a){var b,c,d=a.select("Graphics");return d?(b=d.attr("LineStyle"),b?b:(c=a.selectAll("Attribute"),c.length>0?(b=c.filter(function(){return"org.pathvisiojs.DoubleLineProperty"===d3.select(this).attr("Key")&&"Double"===d3.select(this).attr("Value")}),b[0].length>0?"double":null):null)):void 0}function g(a){var b={Solid:"solid",Double:"solid",Broken:"dashed"},c=b[a];return c?c:(console.warn('LineStyle "'+a+'" does not have a corresponding borderStyle. Using "solid"'),"solid")}function h(a,b){var c,d={Solid:"solid",Double:"solid",Broken:"dashed"};return a!==b?a?(c=d[a],c?c:(console.warn('LineStyle "'+a+'" does not have a corresponding borderStyle. Using "solid"'),"solid")):"solid":"whatever the default value is"}function i(a,b){var c=g(b);return a.borderStyle=c,a}function j(a,b,c){var d;return b!==c&&(d=h(b,c),a.borderStyle=d),a}function k(a,b,c){var d=d3.select(a);console.log("GPML"),console.log(a);var e={};if(e.xmlns=d.attr("xmlns"),e.nodes=[],e.edges=[],e.elements=[],-1===pathvisiojs.data.gpml.namespaces.indexOf(e.xmlns))throw alert("Pathvisiojs does not support the data format provided. Please convert to GPML and retry."),new Error("Pathvisiojs does not support the data format provided. Please convert to GPML and retry.");0!==pathvisiojs.data.gpml.namespaces.indexOf(e.xmlns)?c("fail"):async.parallel({"@context":function(a){e["@context"]={"@vocab":"http://vocabularies.wikipathways.org/gpml#","@base":b,gpml:"http://vocabularies.wikipathways.org/gpml#",id:"@id",xsd:"http://www.w3.org/2001/XMLSchema#",wp:"http://vocabularies.wikipathways.org/wp#",biopax:"http://www.biopax.org/release/biopax-level3.owl#",schema:"http://schema.org/",hMDB:"http://www.hmdb.ca/metabolites/HMDB",entrezGene:"http://www.ncbi.nlm.nih.gov/gene/",ChEBI:"http://www.ebi.ac.uk/chebi/searchId.do?chebiId=",media:"http://www.w3.org/TR/mediaont-10/",ex:"http://www.example.com/",pathwayIri:b,PublicationXref:"biopax:PublicationXref",gpmlFolder:"file://Users/andersriutta/Sites/pathvisiojs/test/gpml/",name:"http://xmlns.com/foaf/0.1/name",dcterms:"http://puri.org/dc/terms/",css2:"http://www.w3.org/TR/CSS2/",css3Ui:"http://www.w3.org/TR/css3-ui/#",cssTransform:"http://www.w3.org/TR/css-transforms-1/#",svg:"http://www.w3.org/TR/SVG11/",boxSizing:{"@id":"css3Ui:box-sizing","@value":"border-box"},rotate:"cssTransform:funcdef-rotate",position:"css2:visuren.html#propdef-position",color:"css2:colors.html#propdef-color",backgroundColor:"css2:colors.html#propdef-background-color",backgroundImage:"css2:colors.html#propdef-background-image",borderColor:"css2:box.html#propdef-border-color",borderWidth:"css2:box.html#propdef-border-width",borderStyle:"css2:box.html#propdef-border-style",x:"css2:visuren.html#propdef-left",y:"css2:visuren.html#propdef-top",width:"css2:visudet.html#propdef-width",height:"css2:visudet.html#propdef-height",padding:"css2:box.html#propdef-padding",fontFamily:"css2:fonts.html#font-family-prop",fontStyle:"css2:fonts.html#propdef-font-style",textAlign:"css2:text.html#propdef-text-align",verticalAlign:"css2:visudet.html#propdef-vertical-align",fontSize:"css2:fonts.html#propdef-font-size",fontWeight:"css2:fonts.html#propdef-font-weight",zIndex:{"@id":"css2:z-index","@type":"xsd:integer"},DatasourceReference:"wp:DatasourceReference",DataSource:"gpml:Data-Source",LastModified:"gpml:Last-Modified",Pathway:"biopax:Pathway",shapeLibrary:"http://shapelibrary.example.org/",shapeName:"shapeLibrary:shapeName",image:"schema:image",dataNodeType:"gpml:Type",author:"schema:author",organism:"biopax:organism",stroke:"svg:painting.html#StrokeProperty",strokeWidth:"svg:painting.html#StrokeWidthProperty",line:{"@id":"svg:text.html#TSpanElement","@container":"@set"},Group:{"@id":"gpml:Group","@container":"@list"},pathwayElements:{"@id":"ex:pathwayElements/","@container":"@list"},contains:{"@id":"ex:contains","@type":"@id"},isContainedBy:{"@reverse":"ex:contains","@type":"@id"},edge:{"@type":"@id","@container":"@list",InteractionGraph:{"@type":"@id","@container":"@list"}},InteractionGraph:{"@type":"@id","@container":"@list"},interactsWith:{"@id":"ex:interactsWith","@type":"@id"},Interaction:{"@id":"biopax:Interaction","@type":"@id"},Point:{"@id":"gpml:Point","@container":"@list"}},a(null,e["@context"])},PublicationXref:function(a){pathvisiojs.data.gpml.biopaxRef.getAllAsPvjson(d,function(b){b?(e.PublicationXref=b,a(null,"BiopaxRefs are all converted.")):a(null,"No biopaxRefs to convert.")})},DataSource:function(a){var b=d.attr("Data-Source");b?(e.DataSource=b,a(null,"DataSource converted.")):a(null,"No DataSource to convert.")},Version:function(a){var b=d.attr("Version");b?(e.Version=b,a(null,"Version converted.")):a(null,"No Version to convert.")},Author:function(a){var b=d.attr("Author");b?(e.Author=b,a(null,"Author converted.")):a(null,"No Author to convert.")},Maintainer:function(a){var b=d.attr("Maintainer");b?(e.Maintainer=b,a(null,"Maintainer converted.")):a(null,"No Maintainer to convert.")},Email:function(a){var b=d.attr("Email");b?(e.Email=b,a(null,"Email converted.")):a(null,"No Email to convert.")},LastModified:function(a){var b=d.attr("Last-Modified");b?(e.LastModified=b,a(null,"LastModified converted.")):a(null,"No LastModified to convert.")},License:function(a){var b=d.attr("License");b?(e.License=b,a(null,"License converted.")):a(null,"No License to convert.")},Name:function(a){var b=d.attr("Name");b?(e.Name=b,a(null,"Name converted.")):a(null,"No Name to convert.")},Organism:function(a){var b=d.attr("Organism");b?(e.Organism=b,a(null,"Organism converted.")):a(null,"No Organism to convert.")},image:function(a){e.image={"@context":{"@vocab":"http://schema.org/"},width:parseFloat(d.select("Graphics").attr("BoardWidth")),height:parseFloat(d.select("Graphics").attr("BoardHeight"))},a(null,e.image)},Biopax:function(a){var b=d.selectAll("Biopax");b[0].length>0?(pathvisiojs.data.biopax.toPvjson(b,function(a){e.Biopax=a}),a(null,"Biopax all converted.")):a(null,"No Biopax to convert.")},DataNode:function(a){var c,f=d.selectAll("DataNode");f[0].length>0?(e.DataNode=[],f.each(function(){c=d3.select(this),pathvisiojs.data.gpml.element.node.entityNode.dataNode.toPvjson(c,b,function(a){e.DataNode.push(a),e.nodes=e.nodes.concat(a),e.elements=e.elements.concat(a)})}),a(null,"DataNodes are all converted.")):a(null,"No dataNodes to convert.")},Label:function(a){var c,f=d.selectAll("Label");f[0].length>0?(e.Label=[],d.selectAll("Label").each(function(){c=d3.select(this),pathvisiojs.data.gpml.element.node.entityNode.label.toPvjson(c,b,function(a){e.Label.push(a),e.nodes=e.nodes.concat(a),e.elements=e.elements.concat(a)})}),a(null,"Labels are all converted.")):a(null,"No labels to convert.")},Shape:function(a){var c,f=d.selectAll("Shape");f[0].length>0?(e.Shape=[],d.selectAll("Shape").each(function(){c=d3.select(this),pathvisiojs.data.gpml.element.node.entityNode.shape.toPvjson(c,b,function(a){e.Shape.push(a),e.nodes=e.nodes.concat(a),e.elements=e.elements.concat(a)})}),a(null,"Shapes are all converted.")):a(null,"No shapes to convert.")},Group:function(c){var f,g=d.selectAll("Group");g[0].length>0?(e.Group=[],d.selectAll("Group").each(function(){f=d3.select(this),pathvisiojs.data.gpml.element.node.groupNode.toPvjson(a,f,b,function(a){e.Group.push(a),e.nodes=e.nodes.concat(a)})}),c(null,"Groups are all converted.")):c(null,"No groups to convert.")},GraphicalLine:function(c){var f,g=d.selectAll("GraphicalLine");g[0].length>0?(e.GraphicalLine=[],d.selectAll("GraphicalLine").each(function(){f=d3.select(this),pathvisiojs.data.gpml.edge.graphicalLine.toPvjson(a,f,b,function(a){e.GraphicalLine.push(a),e.edges=e.edges.concat(a),e.elements=e.elements.concat(a)})}),c(null,"GraphicalLines are all converted.")):c(null,"No graphicalLines to convert.")},Interaction:function(c){var f,g=d.selectAll("Interaction");g[0].length>0?(e.Interaction=[],d.selectAll("Interaction").each(function(){f=d3.select(this),pathvisiojs.data.gpml.edge.interaction.toPvjson(a,f,b,function(a){e.Interaction.push(a),e.edges=e.edges.concat(a),e.elements=e.elements.concat(a)})}),c(null,"Interactions are all converted.")):c(null,"No interactions to convert.")}},function(){var a,b=[];e.Group?(a={"@context":e["@context"],"@type":"GroupNode",contains:{}},jsonld.frame(e,a,function(a,d){async.waterfall([function(a){d["@graph"].forEach(function(a){a.contains&&pathvisiojs.data.gpml.element.node.groupNode.getGroupDimensions(a,function(c){a.x=c.x,a.y=c.y,a.width=c.width,a.height=c.height,a.zIndex=c.zIndex,pathvisiojs.data.gpml.element.node.getPorts(a,function(c){a.Port=c,-1===b.indexOf(a)&&b.push(a)})})}),a(null,b)},function(a,b){e.Group=a,e.elements=e.elements.concat(e.Group);var c={GroupNode:0,Interaction:1,GraphicalLine:2,Anchor:3,EntityNode:4};e.elements.sort(function(a,b){var d,e;return a.zIndex!==b.zIndex?(d=a.zIndex+c[a.renderableType],e=b.zIndex+c[b.renderableType]):(d=a.zIndex,e=b.zIndex),d-e}),b(null,e)},function(a,b){a.pathwayNestedByGrouping=d3.nest().key(function(a){return a.isContainedBy}).entries(a.elements);var c=a.pathwayNestedByGrouping.filter(function(a){return"undefined"===a.key})[0];a.pathwayNestedByGrouping=pathvisiojs.utilities.moveArrayItem(a.pathwayNestedByGrouping,a.pathwayNestedByGrouping.indexOf(c),0),b(null,a)},function(a){c(a)}])})):(e.elements.sort(function(a,b){return a.zIndex-b.zIndex}),e.pathwayNestedByGrouping=d3.nest().key(function(a){return a.isContainedBy}).entries(e.elements),c(e))})}return{get:a,toPvjson:k,getLineStyle:f,getBorderStyleNew:g,setBorderStyleAsJsonNew:i,getBorderStyle:h,setBorderStyleAsJson:j,gpmlColorToCssColor:c,gpmlColorToCssColorNew:b,setColorAsJsonNew:d,setColorAsJson:e}}(),pathvisiojs.data.gpml.node=pathvisiojs.data.gpml.node||{},pathvisiojs.data.gpml.element={};var pathvisioDefaultStyleValues={FontSize:{Type:"FontSize",Value:10}};pathvisiojs.data.gpml.element.gpmlColorToCssColor=function(a,b){var c;return a!==b?a?(c=new RGBColor(a),c.ok?c.toHex():"black"):"black":null},pathvisiojs.data.gpml.element.setColorAsJson=function(a,b,c){var d;return b!==c&&(d=gpmlColorToCssColor(b,c),a.color=d,a.borderColor=d,a.hasOwnProperty("text")&&(a.text.color=d)),a},pathvisiojs.data.gpml.element.setColorAsJson=function(a,b,c){var d;return b!==c&&(d=gpmlColorToCssColor(b,c),a.color=d,a.borderColor=d,a.hasOwnProperty("text")&&(a.text.color=d)),a},pathvisiojs.data.gpml.element.getLineStyle=function(a){var b,c,d=a.select("Graphics");return d?(b=d.attr("LineStyle"),b?b:(c=a.selectAll("Attribute"),c.length>0?(b=c.filter(function(){return"org.pathvisiojs.DoubleLineProperty"===d3.select(this).attr("Key")&&"Double"===d3.select(this).attr("Value")}),b[0].length>0?"double":null):null)):void 0},pathvisiojs.data.gpml.element.getBorderStyle=function(a,b){var c,d={Solid:"solid",Double:"solid",Broken:"dashed"};return a!==b?a?(c=d[a],c?c:(console.warn('LineStyle "'+a+'" does not have a corresponding borderStyle. Using "solid"'),"solid")):"solid":"whatever the default value is"},pathvisiojs.data.gpml.element.setBorderStyleAsJson=function(a,b,c){var d;return b!==c&&(d=getBorderStyle(b,c),a.borderStyle=d),a},pathvisiojs.data.gpml.element.color={},pathvisiojs.data.gpml.element.color.swing="000000",pathvisiojs.data.gpml.element.color.gpml=null,pathvisiojs.data.gpml.element.fillColor={},pathvisiojs.data.gpml.element.fillColor.swing="ffffff",pathvisiojs.data.gpml.element.fillColor.gpml=null,pathvisiojs.data.gpml.element.lineStyle={},pathvisiojs.data.gpml.element.lineStyle.swing="Solid",pathvisiojs.data.gpml.element.lineStyle.gpml=null,pathvisiojs.data.gpml.element.fontSize={},pathvisiojs.data.gpml.element.fontSize.swing=10,pathvisiojs.data.gpml.element.fontSize.gpml=10,pathvisiojs.data.gpml.element.fontWeight={},pathvisiojs.data.gpml.element.fontWeight.swing=null,pathvisiojs.data.gpml.element.fontWeight.gpml=null,pathvisiojs.data.gpml.element.fontName={},pathvisiojs.data.gpml.element.fontName.swing="Arial",pathvisiojs.data.gpml.element.fontName.gpml=null,pathvisiojs.data.gpml.element.toPvjson=function(a,b,c){b["@type"]=b["@type"]||[],b["@type"].push("element"),pathvisiojs.data.gpml.biopaxRef.getAllAsPvjson(a,function(a){a&&(b.PublicationXref=a),c(b)})},pathvisiojs.data.gpml.text=function(){"use strict";function a(a,c,d){var e,f,g,h,i,j,k,l=pathvisiojs.utilities.collect(b.text,c),m=a.attr("TextLabel");if(m){e={},e.id="id"+uuid.v4(),e.line=m.split(/\r\n|\r|\n|&#xA;/g);var f,h,i,j,k,n=a.select("Graphics");n[0][0]&&(f=a.select("Graphics").attr("Align")||"center",e.textAlign=f.toLowerCase(),g=a.select("Graphics").attr("Valign")||"middle",e.verticalAlign=g.toLowerCase(),h=a.select("Graphics").attr("FontStyle"),h!==l.FontStyle&&h&&(e.fontStyle=h.toLowerCase()),i=a.select("Graphics").attr("FontWeight"),i!==l.FontWeight&&i&&(e.fontWeight=i.toLowerCase()),j=a.select("Graphics").attr("FontSize")||10,parseFloat(j)!==l.FontSize&&j&&(e.fontSize=parseFloat(j)),k=a.select("Graphics").attr("FontName"),k!==l.FontName&&k&&(e.fontFamily=k)),d(e)}else d(null)}var b={text:{Align:null,Valign:"Middle",FontStyle:null,FontName:null}};return{toPvjson:a}}(),pathvisiojs.data.gpml.namespaces=["http://pathvisio.org/GPML/2013a","http://genmapp.org/GPML/2010a","http://genmapp.org/GPML/2008a","http://genmapp.org/GPML/2007"],pathvisiojs.data.gpml.biopaxRef=function(){"use strict";function a(a,b){var c,d,e=a[0][0].tagName,f=a.selectAll(e+" > BiopaxRef");f[0].length>0?(c=[],f.each(function(){d=d3.select(this)[0][0].textContent,c.push(d)}),b(c)):b(null)}return{getAllAsPvjson:a}}(),pathvisiojs.data.gpml.element.node=function(){"use strict";var a={};a.backgroundImage={},a.shapeType={},a.shapeType.swing="Rectangle",a.shapeType.gpml="Rectangle",a.valign=a.verticalAlign={},a.valign.swing="Middle",a.valign.gpml="Middle",a.align=a.textAlign={},a.align.swing="Center",a.align.gpml=null,a.padding={},a.padding.swing="0.5em",a.padding.gpml=null,a.lineThickness=a.borderWidth={},a.lineThickness.swing=1,a.lineThickness.gpml=null,a.lineStyle=a.borderStyle;var b=function(a,b){var c=pathvisiojs.data.gpml.gpmlColorToCssColorNew(b);return a.backgroundColor=c,a},c=function(a,b){var c,d,e=function(a,b,c){var d,e,f=c*Math.PI/180,g=2*Math.PI-f,h=Math.atan2(b,a),d=Math.cos(h+g-Math.PI/2),e=Math.sin(h+g-Math.PI/2);return{dx:d,dy:e}},f=[],g=[{RelX:-.5,RelY:-1},{RelX:0,RelY:-1},{RelX:.5,RelY:-1},{RelX:1,RelY:-.5},{RelX:1,RelY:0},{RelX:1,RelY:.5},{RelX:-.5,RelY:1},{RelX:0,RelY:1},{RelX:.5,RelY:1},{RelX:-1,RelY:-.5},{RelX:-1,RelY:0},{RelX:-1,RelY:.5}],h={};g.forEach(function(b){1===Math.abs(b.RelX)?(h.sx=b.RelX,h.sy=0):(h.sx=0,h.sy=b.RelY),d=a.rotate||0,c=e(h.sx,h.sy,d),f.push({x:a.x+a.width*(b.RelX+1)/2,y:a.y+a.height*(b.RelY+1)/2,positionRelative:{"@context":{position:{"@value":"relative"}},x:100*(b.RelX+1)/2+"%",y:100*(b.RelY+1)/2+"%"},dx:c.dx,dy:c.dy,"@type":"Port"})}),b(f)},d=function(a,b,c){b["@type"]=b["@type"]||[],b["@type"].push("node"),pathvisiojs.data.gpml.element.toPvjson(a,b,function(a){c(a)})},e=function(a,b,c){var d={};return d.x=a.x+b*a.width,d.y=a.y+c*a.height,d};return{setJsonBackgroundColor:b,getPorts:c,getPortCoordinates:e,toPvjson:d}}(),pathvisiojs.data.gpml.element.node.groupNode=function(){"use strict";function a(a,b){var c={};c.topLeftCorner={},c.topLeftCorner.x=99999,c.topLeftCorner.y=99999,c.bottomRightCorner={},c.bottomRightCorner.x=0,c.bottomRightCorner.y=0;var d=a.contains;d=pathvisiojs.utilities.convertToArray(d),c.zIndex=d[0].zIndex,async.each(d,function(b,d){"EntityNode"===b.renderableType?(c.topLeftCorner.x=Math.min(c.topLeftCorner.x,b.x),c.topLeftCorner.y=Math.min(c.topLeftCorner.y,b.y),c.bottomRightCorner.x=Math.max(c.bottomRightCorner.x,b.x+b.width),c.bottomRightCorner.y=Math.max(c.bottomRightCorner.y,b.y+b.height)):(c.topLeftCorner.x=Math.min(c.topLeftCorner.x,b.Point[0].x,b.Point[b.Point.length-1].x),c.topLeftCorner.y=Math.min(c.topLeftCorner.y,b.Point[0].y,b.Point[b.Point.length-1].y),c.bottomRightCorner.x=Math.max(c.bottomRightCorner.x,b.Point[0].x,b.Point[b.Point.length-1].x),c.bottomRightCorner.y=Math.max(c.bottomRightCorner.y,b.Point[0].y,b.Point[b.Point.length-1].y)),c.x=c.topLeftCorner.x-a.padding-a.borderWidth,c.y=c.topLeftCorner.y-a.padding-a.borderWidth,c.width=c.bottomRightCorner.x-c.topLeftCorner.x+2*(a.padding+a.borderWidth),c.height=c.bottomRightCorner.y-c.topLeftCorner.y+2*(a.padding+a.borderWidth),c.zIndex=Math.min(c.zIndex,b.zIndex),d(null)},function(){b(c)})}function b(a,b,e,f){var g,h,i,j={},k=b.attr("GraphId")||"id"+uuid.v4();j.GraphId=k,g=b.attr("GroupId")||"id"+uuid.v4(),j.id=g,j.GroupId=g,i=b.attr("Style")||"None";var h=c[i];j.ShapeType=h||"rectangle",j.renderableType="GroupNode",j.nodeType="GroupNode",j.groupType=i,j["@type"]=[],j["@type"].push(h),j["@type"].push("GroupNode"),j["@type"].push(i);var l={Complex:11,Group:8,None:8,Pathway:8};j.padding=l[i],j.borderWidth=1,pathvisiojs.data.gpml.text.toPvjson(b,d,function(a){a&&(j.text=a,j.text.fontSize=32,j.text.textAlign="center",j.text.verticalAlign="middle"),pathvisiojs.data.gpml.element.node.toPvjson(b,j,function(a){f(a)})})}var c={Complex:"complex",Group:"rectangle",None:"rectangle",Pathway:"rectangle"},d={FontSize:null,FontWeight:null};return{toPvjson:b,getGroupDimensions:a}}(),pathvisiojs.data.gpml.element.node.entityNode=Object.create(pathvisiojs.data.gpml.element.node),pathvisiojs.data.gpml.element.node.entityNode.setJsonRotationValue=function(a,b,c){return b!==c&&(a.rotate=180*b/Math.PI),a},pathvisiojs.data.gpml.element.node.entityNode.toPvjson=function(a,b,c,d,e){"use strict";var f=a.attr("GraphId")||"id"+uuid.v4();b.id=""+f,b.GraphId=f;var g=a.attr("GroupRef");g&&(b.isContainedBy=g);var h=a.select("Graphics").attr("ShapeType")||"rectangle";h=strcase.paramCase(h),b.ShapeType=h,b.zIndex=parseFloat(a.select("Graphics").attr("ZOrder")),b.renderableType="EntityNode",b["@type"]=b["@type"]||[],b["@type"].push("EntityNode"),b["@type"].push(h);var i=g||"notGrouped";b["@type"].push(i);var j=a.select("Graphics").attr("LineThickness");j!==c.LineThickness&&(b.borderWidth=parseFloat(j)),j=b.borderWidth||1;var k=parseFloat(a.select("Graphics").attr("Width"));b.width=k+j;var l=parseFloat(a.select("Graphics").attr("Height"));b.height=l+j;var m=parseFloat(a.select("Graphics").attr("CenterX"));b.x=m-k/2;var n=parseFloat(a.select("Graphics").attr("CenterY"));b.y=n-l/2,b.padding="0.5em";var o,p=a.selectAll("Attribute");p.length>0&&(o=p.filter(function(){return"org.pathvisio.DoubleLineProperty"===d3.select(this).attr("Key")&&"Double"===d3.select(this).attr("Value")}),o[0].length>0&&(b.ShapeType=h+"-double")),pathvisiojs.data.gpml.element.node.getPorts(b,function(c){b.Port=c,pathvisiojs.data.gpml.element.node.toPvjson(a,b,function(a){e(a,c)})})},pathvisiojs.data.gpml.element.node.entityNode.dataNode=function(){var a={Color:"000000",FillColor:"ffffff",FontSize:10,FontWeight:"Normal",LineStyle:"Solid"},b=function(b,c,d){"use strict";var e={},f=b.attr("Type");f||(f="Unknown"),e.nodeType="DataNode",e.dataNodeType=f,e["@type"]=e["@type"]||[],e["@type"].push("DataNode"),e["@type"].push(f),pathvisiojs.data.gpml.element.node.entityNode.toPvjson(b,e,a,c,function(c){var e,f,g=b.select("Xref");g&&(e=g.attr("Database"),f=g.attr("ID"),e&&f&&(c.DatasourceReference={},c.DatasourceReference.Database=e,c.DatasourceReference.ID=f)),pathvisiojs.data.gpml.text.toPvjson(b,a,function(e){e&&(c.text=e);var f=b.select("Graphics").attr("LineStyle")||a.LineStyle;c=pathvisiojs.data.gpml.setBorderStyleAsJsonNew(c,f);var g=b.select("Graphics").attr("Color")||a.Color;c=pathvisiojs.data.gpml.setColorAsJsonNew(c,g);var h=b.select("Graphics").attr("FillColor")||a.FillColor;c=pathvisiojs.data.gpml.element.node.setJsonBackgroundColor(c,h),d(c)})})};return{toPvjson:b}}(),pathvisiojs.data.gpml.element.node.entityNode.label=Object.create(pathvisiojs.data.gpml.element.node.entityNode),pathvisiojs.data.gpml.element.node.entityNode.label.Rotation=null,pathvisiojs.data.gpml.element.node.entityNode.label.Color=null,pathvisiojs.data.gpml.element.node.entityNode.label.FillColor=null,pathvisiojs.data.gpml.element.node.entityNode.label.FontSize=10,pathvisiojs.data.gpml.element.node.entityNode.label.FontWeight=null,pathvisiojs.data.gpml.element.node.entityNode.label.toPvjson=function(a,b,c){"use strict";var d={Color:"000000",FillColor:"Transparent",FontSize:10,FontWeight:"Normal",LineStyle:"Solid"},e={};e.nodeType="Label",pathvisiojs.data.gpml.element.node.entityNode.toPvjson(a,e,pathvisiojs.data.gpml.element.node.entityNode.label,b,function(b){pathvisiojs.data.gpml.text.toPvjson(a,pathvisiojs.data.gpml.element.node.entityNode.label,function(e){e&&(b.text=e),b=pathvisiojs.data.gpml.setColorAsJson(b,a.select("Graphics").attr("Color"),pathvisiojs.data.gpml.element.node.entityNode.label.Color);var f=a.select("Graphics").attr("FillColor")||d.FillColor,g=pathvisiojs.data.gpml.gpmlColorToCssColor(f,pathvisiojs.data.gpml.element.node.entityNode.label.FillColor);g&&(b.backgroundColor=g),c(b)})})},pathvisiojs.data.gpml.element.node.entityNode.shape=function(){"use strict";function a(a,d,e){self.myGpmlShape=a;var f,g;"Triangle"===a.select("Graphics").attr("ShapeType")&&(f=parseFloat(a.select("Graphics").attr("Width")),g=parseFloat(a.select("Graphics").attr("CenterX")),a.select("Graphics").attr("CenterX",g+.27*f),a.select("Graphics").attr("Width",.98*f));var h={};h.nodeType="Shape";var i,j=a.selectAll("Attribute");j.length>0&&(i=j.filter(function(){return"org.pathvisio.CellularComponentProperty"===d3.select(this).attr("Key")&&"None"!==d3.select(this).attr("Value")}),i[0].length>0&&(h.CellularComponent=i.attr("Value")));var k;k=h.CellularComponent?pathvisiojs.utilities.collect(c.Shape,c.Shape[strcase.classCase(h.CellularComponent)]):c.Shape,pathvisiojs.data.gpml.element.node.entityNode.toPvjson(a,h,k,d,function(c){pathvisiojs.data.gpml.text.toPvjson(a,k,function(d){d&&(c.text=d),c=pathvisiojs.data.gpml.setColorAsJson(c,a.select("Graphics").attr("Color"),k.Color);var f=a.select("Graphics").attr("FillColor")||b.FillColor;c=pathvisiojs.data.gpml.element.node.setJsonBackgroundColor(c,f),c=pathvisiojs.data.gpml.element.node.entityNode.setJsonRotationValue(c,a.select("Graphics").attr("Rotation"),k.Rotation),c=pathvisiojs.data.gpml.setBorderStyleAsJson(c,a.select("Graphics").attr("LineStyle"),k.LineStyle),e(c)})})}var b={Color:"000000",FillColor:"Transparent",FontSize:10,FontWeight:"Normal",LineStyle:"Solid"},c={Shape:{Rotation:"0.0",Color:null,FillColor:null,FontSize:10,FontWeight:null,LineStyle:null,LineThickness:null,Cell:{Color:"c0c0c0",LineStyle:"Broken"},Nucleus:{Color:"c0c0c0"},EndoplasmicReticulum:{Color:"c0c0c0"},GolgiApparatus:{Color:"c0c0c0"},Mitochondria:{Color:"c0c0c0"},SarcoplasmicReticulum:{Color:"c0c0c0"},Organelle:{Color:"c0c0c0"},Vesicle:{Color:"c0c0c0"},ExtracellularRegion:{Color:"c0c0c0"}}};
return{toPvjson:a}}(),pathvisiojs.data.gpml.node.anchor=function(){"use strict";function a(a,b,c,d,e){var f,g,h,i,j;if("edge"!==c)throw new Error("anchor.toPvjson doesnt know how to handle anything other than edges as parent elements right now. handling other elements needs to be implemented.");f=a.selectAll("Anchor"),f[0].length>0?(b.Anchor=[],f.each(function(){h={},g=d3.select(this),j=g.attr("GraphId")||"id"+uuid.v4(),i=""+j,h.id=i,h["@type"]=["node","element","Element","Anchor"],h.dependsOn=b.id,h.anchorPosition=g.attr("Position"),b.stroke&&(h.backgroundColor=b.stroke),h.ShapeType=g.attr("Shape"),h.ShapeType?"Circle"===h.ShapeType&&(h.ShapeType="oval"):h.ShapeType="none",b.Anchor.push(h)}),e(b)):e(b)}function b(a){self.jsonNode=a;var b,c,d,e,f,g,h,i,j,k=[],l=[{side:"top",dx:0,dy:-1},{side:"right",dx:1,dy:0},{side:"bottom",dx:0,dy:1},{side:"left",dx:-1,dy:0}],m=[.25,.5,.75];return b=a.id,c="anchor",l.forEach(function(b){g=Math.max(b.dx,0)*a.width,h=Math.max(b.dy,0)*a.height,m.forEach(function(c){d=String(a.id)+String(b.side)+String(c),i=Math.abs(b.dy)*c*a.width,j=Math.abs(b.dx)*c*a.height,e=a.x+g+i,f=a.y+h+j,k.push({parentId:a.id,renderableType:"anchor",side:b.side,dx:b.dx,dy:b.dy,id:d,position:c,x:e,y:f})})}),k}return{toPvjson:a,getAllFromNode:b}}(),pathvisiojs.data.gpml.edge=function(){"use strict";function a(a,b,c){var d,e={},f=a.attr("GraphId")||"id"+uuid.v4(),g=""+f;e.id=g,e.GraphId=f;var h,i=a.attr("GroupRef"),j=[];i&&(h=e.isContainedBy=""+i,j.push(h)),e.zIndex=parseFloat(a.select("Graphics").attr("ZOrder"));var d=a.selectAll("Point");e["@type"]=["element","SvgPath","Edge",h||"notGrouped"];var k,l;e.Point=[],d.each(function(){k=d3.select(this),l={};var a=parseFloat(k.attr("RelX")),b=parseFloat(k.attr("RelY"));null!==a&&void 0!==a&&null!==b&&void 0!==b?(l["@type"]="SnappedPoint",j.push(""+k.attr("GraphRef")),l.hasReference=""+k.attr("GraphRef"),l.RelX=a,l.RelY=b,l.x=parseFloat(k.attr("X")),l.y=parseFloat(k.attr("Y"))):(l["@type"]="GraphicalPoint",l.x={},l.x=parseFloat(k.attr("X")),l.y=parseFloat(k.attr("Y"))),e.Point.push(l)});var m=a.select("Graphics").attr("ConnectorType")||"Straight";e.ConnectorType=""+m;var n=a.select("Graphics").attr("Color");n&&(e.stroke=n);var o=a.select("Graphics").attr("LineThickness");o&&(e.strokeWidth=parseFloat(o)),pathvisiojs.data.gpml.node.anchor.toPvjson(a,e,"edge",b,function(b){pathvisiojs.data.gpml.element.toPvjson(a,b,function(a){c(a)})})}return{toPvjson:a}}(),pathvisiojs.data.gpml.edge.interaction=function(){"use strict";function a(a){for(var b in d)if(d[b]===a)return b;return b||(b=a,console.warn('No GPML ArrowHead name found for semantic name "'+a+'". Returning original semantic name as GPML ArrowHead name. PathVisio-Java will delete this ArrowHead from the GPML file if it edits this file.')),b}function b(a){var b;return a?(b=d[a],b||(b=a,console.warn('No semantic name found for GPML ArrowHead name "'+a+'". Returning original GPML ArrowHead name as semantic name.'))):b="Unspecified",b}function c(a,c,d,e){var f,g,h,i,j,k;pathvisiojs.data.gpml.edge.toPvjson(c,d,function(d){function l(b,c,e){var f={};d.InteractionGraph=d.InteractionGraph||[],k=b.getAttribute("GraphRef"),k&&(j=a.querySelector("[GraphId="+k+"]"),"Anchor"===j.tagName?k=j.parentNode.parentNode.getAttribute("GraphId"):"Group"===j.tagName&&(k=j.getAttribute("GroupId"))),f.id=k||"no-source",i=c.getAttribute("GraphRef"),i&&(h=a.querySelector("[GraphId="+i+"]"),"Anchor"===h.tagName?i=h.parentNode.parentNode.getAttribute("GraphId"):"Group"===h.tagName&&(i=h.getAttribute("GroupId")),f.interactsWith=i),d.InteractionGraph.push(f),e(f)}d["@type"].push("Interaction"),d.renderableType="Interaction",f=c.selectAll("Point");var m,n,o=c.select("Xref");o&&(m=o.attr("Database"),n=o.attr("ID"),m&&n&&(d.DatasourceReference={},d.DatasourceReference.Database=m,d.DatasourceReference.ID=n));var p=f[0][0],q=p.getAttribute("ArrowHead"),r=f[0][f[0].length-1],s=r.getAttribute("ArrowHead");q&&s?(g=b(p.getAttribute("ArrowHead")+r.getAttribute("ArrowHead")),l(r,p,function(){}),l(p,r,function(){})):q||s?(q&&(l(r,p,function(){}),g=b(p.getAttribute("ArrowHead"))),s&&(g=b(r.getAttribute("ArrowHead")),l(p,r,function(){}))):(r.setAttribute("ArrowHead","Line"),g=b(r.getAttribute("ArrowHead")),l(p,r,function(){})),g?(d["@type"].push(g),d.interactionType=strcase.paramCase(g)):(d["@type"].push("unspecified"),d.interactionType="unspecified",console.warn('Interaction Type unable to be determined. Setting it to "unspecified."')),d.markerStart=q?strcase.paramCase(q):"none",d.markerEnd=s?strcase.paramCase(s):"none",e(d)})}var d={Arrow:"Activity",ArrowArrow:"BidirectionalActivity",TBar:"InhibitoryActivity","mim-catalysis":"Catalysis","mim-inhibition":"Inhibition","mim-branching-left":"mim-branching-left","mim-branching-right":"mim-branching-right","mim-necessary-stimulation":"NecessaryStimulation","mim-binding":"Binding","mim-conversion":"Conversion","mim-stimulation":"Stimulation","mim-modification":"Modification","mim-cleavage":"Cleavage","mim-covalent-bond":"CovalentBond","mim-transcription-translation":"TranscriptionTranslation","mim-gap":"Gap",Line:"Unspecified"};return{toPvjson:c,getGpmlArrowHeadNameFromSemanticName:a,getSemanticNameFromGpmlArrowHeadName:b}}(),pathvisiojs.data.gpml.edge.graphicalLine=function(){"use strict";function a(a,b,c,d){var e;pathvisiojs.data.gpml.edge.toPvjson(b,c,function(a){a["@type"].push("GraphicalLine"),a.renderableType="GraphicalLine",e=b.selectAll("Point");var c=e[0][0];a.markerStart=c.getAttribute("ArrowHead")?strcase.paramCase(c.getAttribute("ArrowHead")):"none";var f=e[0][e[0].length-1];f.getAttribute("ArrowHead")?a.markerEnd=strcase.paramCase(f.getAttribute("ArrowHead")):(console.log("markerEnd = none"),a.markerEnd="none"),a.ConnectorType=b.select("Graphics").attr("ConnectorType"),a.ConnectorType||(a.ConnectorType="Straight"),d(a)})}return{toPvjson:a}}(),pathvisiojs.data.gpml.edge.point=function(){"use strict";function a(a,d){var e={};try{e.x=parseFloat(a.attr("X")),e.y=parseFloat(a.attr("Y"));var f,g,h=String(a.attr("RelX")),i=String(a.attr("RelY"));h&&i&&"null"!=h&&"null"!=i&&("0.0"==h&&"0.0"==i?e.anchorId=a.attr("GraphRef"):(f=void 0!==b[h].side?b[h].side:c[i].side,g=void 0!==b[h].position?b[h].position:c[i].position,e.anchorId=String(a.attr("GraphRef"))+String(f)+String(g))),d(e)}catch(j){return console.log("Error converting point to json: "+j.message),j}}var b={"-1.0":{side:"left"},"-0.5":{position:.25},"0.0":{position:.5},.5:{position:.75},"1.0":{side:"right"}},c={"-1.0":{side:"top"},"-0.5":{position:.25},"0.0":{position:.5},.5:{position:.75},"1.0":{side:"bottom"}};return{toPvjson:a}}(),pathvisiojs.view=pathvisiojs.view||{},pathvisiojs.view.annotation=function(){"use strict";function a(a){self.annotationData=a;var b=d3.select("#annotation").data([a]),c=d3.behavior.drag().on("drag",function(){var a=parseInt(b.style("right")),c=parseInt(b.style("top"));a-=d3.event.dx,c+=d3.event.dy,b.style("right",a+"px"),b.style("top",c+"px")});b.select("#annotation-header-text").text(function(a){return a.header}),b.select("#annotation-header-search").select("a").attr("href",function(a){return pathvisiojs.config.pathwaySearchUriStub+a.header}).attr("title",function(a){return"Search for pathways containing "+a.header}),b.select("i.icon-move").on("mousedown",function(){b.call(c)}).on("mouseup",function(){b.on("mousedown.drag",null)}),b.select("i.icon-remove").on("click",function(){b[0][0].style.visibility="hidden"});var d=b.select("#annotation-description").text(function(a){return a.description}),e=b.selectAll("#annotation-items-container").data(function(a){return"string"==typeof a.listItems[0]?("gif"==a.listItems[0].split(".").pop()?(d.append("br"),d.append("br"),d.append("img").attr("src",a.listItems[0]).attr("style","width: 20px")):d.append("p").html('<font color="red">'+a.listItems[0]+"</font>"),[{key:"clear",values:[{clear:"clear"}]}]):[a.listItems]}),f=e.selectAll("li").data(function(a){return a});f.enter().append("li"),f.exit().remove();var g=f.selectAll(".annotation-item-title").data(function(a){return[a.key]}).text(function(a){return a+": "});g.enter().append("span").attr("class","annotation-item-title").text(function(a){return a+": "}),g.exit().remove();var h=f.selectAll("span.annotation-item-text").data(function(a){return a.values.filter(function(a){return a.hasOwnProperty("uri")?void 0:a})}).text(function(a){return" "+a.text});h.enter().append("span").attr("class","annotation-item-text").text(function(a){return" "+a.text}),h.exit().remove();var i=f.selectAll("a.annotation-item-text").data(function(a){return a.values.filter(function(a){return a.hasOwnProperty("uri")?a:void 0})}).attr("href",function(a){return a.uri}).attr("class","annotation-item-text").text(function(a){return" "+a.text});i.enter().append("a").attr("href",function(a){return a.uri}).attr("class","annotation-item-text").text(function(a){return" "+a.text}),i.exit().remove(),b[0][0].style.visibility="visible"}return{render:a}}(),pathvisiojs.view.annotation.citation=function(){"use strict";function a(){}return{render:a}}(),pathvisiojs.view.annotation.xRef=function(){"use strict";function a(a,d,e,f,g){var h=b(a,f,d,e);if(h)pathvisiojs.view.annotation.render(h);else{var h={header:f,description:g,listItems:[pathvisiojs.config.diagramLoadingIconUri]};pathvisiojs.view.annotation.render(h),pathvisiojs.data.bridgedb.getXrefAnnotationDataByDataNode(a,d,e,f,g,function(b){c(a,f,d,e,b),pathvisiojs.view.annotation.render(b)})}}function b(a,b,c,e){return d[a+b+c+e]}function c(a,b,c,e,f){d[a+b+c+e]=f}var d={};return{render:a}}(),pathvisiojs.view.pathwayDiagram=function(){"use strict";function a(a){var c,d,f,g=b(),h=0;do c=a[h],d=e[c.fileType],f=pathvisiojs.utilities.intersect(d,g),h+=1;while(f.length<1&&h<a.length+1);return c.selectedViewMethod=f[0],c}function b(){var a=["img"];return Modernizr.inlinesvg&&a.push("svg"),a}function c(a,b){a.html(pathvisioNS["src/pathvisiojs.html"]);var c=a.select("#diagram-container");b(c)}function d(b){var d,e,f=b.container,g=b.sourceData,h=b.fitToContainer,i=b.cssUri,j=b.customMarkers,k=b.highlights;if(b.hiddenElements,!g[0].uri)throw new Error("No sourceData uri specified.");if(!f)throw new Error("No container selector specified as container for pathvisiojs.");if(d=d3.select(f),1!==d.length)throw new Error("Container selector must be matched by exactly one element.");async.waterfall([function(a){c(d,function(b){e=b,a(null)})},function(b){var c=pathvisiojs.config.diagramLoadingIconUri;e.append("img").attr("id","loading-icon").attr("src",c).attr("width",50);var f=a(g),h=d[0][0].getBoundingClientRect(),i=h.width-3,j=h.height-3;b(null,i,j,f)},function(a,b,c,d){var f={};f.container=e,f.renderableSourceDataElement=c,f.containerWidth=a,f.containerHeight=b,f.fitToContainer=h,f.highlights=k,"svg"===c.selectedViewMethod?(f.cssUri=i,f.customMarkers=j,pathvisiojs.view.pathwayDiagram.svg.load(f,function(a){a?d(null,a):(f.renderableSourceDataElement=g[1],pathvisiojs.view.pathwayDiagram.img.load(f,function(a){d(null,a)}))})):pathvisiojs.view.pathwayDiagram.img.load(f,function(a){d(null,a)})},function(a,b){e.select("#loading-icon").remove(),d3.select("body").append("span").attr("id","pathvisiojs-is-loaded"),b(null)}])}var e={gpml:["svg"],biopax:["svg"],pdf:["pdf"],png:["img"],jpg:["img"],jpeg:["img"],jpe:["img"],jif:["img"],jfif:["img"],jfi:["img"],gif:["img"],ico:["img"],bmp:["img"],dib:["img"]};return{load:d}}(),pathvisiojs.view.pathwayDiagram.svg=function(){"use strict";function a(a,b,c,d,e){var f=Math.min(b/d,c/e),g=f*d,h=f*e,i=b/2-g/2+10,j=c/2-h/2+20,k="matrix("+f+", 0, 0, "+f+", "+i+", "+j+") ";a.attr("transform",k)}function b(b,c){var d,e,f=b.container,g=b.containerWidth,h=b.containerHeight,i=b.cssUri,j=b.renderableSourceDataElement,k=b.fitToContainer,l=b.customMarkers,m=b.highlights;async.waterfall([function(a){async.parallel({preloadSvg:function(a){var b={};b.container=f,b.customMarkers=l,b.cssUri=i,pathvisiojs.view.pathwayDiagram.svg.loadPartials(b,function(b){if(e=b,!e)throw new Error("Could not load SVG template.");a(null)})},pathway:function(a){pathvisiojs.data.pvjson.get(j,function(b){if(pathvisiojs.context=b["@context"],!b||"fail"===b)throw c(null),new Error("Could not convert input source data to pathvisioJsJson.");d=b,a(null,b)})}},function(){a(null)})},function(a){pathvisiojs.view.pathwayDiagram.svg.renderWithCachedData(e,d,function(){a(null)})},function(b){m&&m.forEach(function(a){pathvisiojs.view.pathwayDiagram.svg.node.highlight(a)});var c=e.select("#viewport");k&&a(c,g,h,d.image.width,d.image.height),d3.select("#reset-pan-zoom").on("click",function(){a(c,g,h,d.image.width,d.image.height)}),svgPanZoom.init({selector:"svg",zoomEnabled:!1,minZoom:"0.1",maxZoom:"8.0"});var f=!1;e.on("click",function(){svgPanZoom.enableZoom(),f=!0}).on("mouseenter",function(){f&&svgPanZoom.enableZoom()}).on("mouseleave",function(){f&&(svgPanZoom.disableZoom(),f=!1)}),b(null)},function(a){var b,c;d&&(b=[],d.hasOwnProperty("DataNode")&&(d.DataNode.forEach(function(a){a.hasOwnProperty("text")&&(c=a.text.line[0],-1===b.indexOf(c)&&b.push(a.text.line[0]))}),$("#highlight-by-label-input").typeahead({name:"Highlight node in pathway",local:b,limit:10})),$("#highlight-by-label-input").bind("typeahead:selected",function(){if(c=$("#highlight-by-label-input").val(),!c)throw new Error("No data node value entered for type-ahead node highlighter.");pathvisiojs.view.pathwayDiagram.svg.node.highlightByLabel(e,d,c)}),d3.select("#clear-highlights-from-typeahead").on("click",function(){pathvisiojs.view.pathwayDiagram.svg.node.clearHighlightsFromTypeahead()}),a(null,"svg loaded"))}],function(){c(e)})}function c(a,b){var c=a.container,d=a.customMarkers,e=a.cssUri;async.series([function(a){c.html(pathvisioNS["tmp/pathvisiojs.svg"]),g=c.select("#pathvisiojs-diagram"),g.attr("style","display: inline; width: inherit; min-width: inherit; max-width: inherit; height: inherit; min-height: inherit; max-height: inherit; ").attr("preserveAspectRatio","xMidYMid"),a(null)},function(b){a.customMarkers?pathvisiojs.view.pathwayDiagram.svg.edge.marker.loadAllCustom(g,d,function(){b(null)}):b(null)},function(a){e?d3.text(e,"text/css",function(b){var c=g.select("defs"),d=c.append("style").attr("type","text/css");d.text(b),a(null)}):a(null)}],function(){b(g)})}function d(a,b){var c,d=a.svg,e=a.data,f=a.pathway,g=a.container;if(!g)throw new Error("No viewport specified.");if(!e)throw new Error("No data entered to render.");if(!d)throw new Error("No svg specified.");if(!f)throw new Error("No pathway specified.");e=pathvisiojs.utilities.convertToArray(e);var j=0;async.each(e,function(a,b){c="undefined"!==a.key?g.select("#"+i(a.key)):g,c.selectAll(".element").data(a.values).enter().append(function(a){var b=h[strcase.camelCase(a.renderableType)],c=document.createElementNS("http://www.w3.org/2000/svg",b);return c}).attr("id",function(a){return i(a.id)}).attr("class","element"),j+=1,b(null)},function(){b(null,"Successfully rendered elements")})}function e(a,b){var c=a.svg,d=a.data,e=a.pathway,f=a.container;if(!f)throw new Error("No container specified.");if(!d)throw new Error("No data entered to render.");if(!c)throw new Error("No svg specified.");if(!e)throw new Error("No pathway specified.");d=pathvisiojs.utilities.convertToArray(d);var g=a;d.forEach(function(a){g.data=a,g.element=d3.select("#"+i(a.id)),"GraphicalLine"===a.renderableType?pathvisiojs.view.pathwayDiagram.svg.edge.graphicalLine.render(g):"Interaction"===a.renderableType?pathvisiojs.view.pathwayDiagram.svg.edge.interaction.render(g):"GroupNode"===a.renderableType?pathvisiojs.view.pathwayDiagram.svg.node.groupNode.render(g,function(){}):"EntityNode"===a.renderableType&&pathvisiojs.view.pathwayDiagram.svg.node.EntityNode.render(g)}),b(null,"Successfully rendered elements")}function f(a,b,c){if(!a)throw new Error("No svg specified.");if(!b)throw new Error("No data entered to render.");var f=a.select("#viewport");pathvisiojs.view.pathwayDiagram.svg.infoBox.render(f,b);var g={};g.svg=a,g.container=f,g.pathway=b,async.waterfall([function(c){g.data=b.pathwayNestedByGrouping,d(g,function(){c(null,a)})},function(a){g.data=b.elements,e(g,function(){c(a)})}])}var g,h={entityNode:"g",groupNode:"g",interaction:"path",graphicalLine:"path"},i=function(a){var b=strcase.paramCase(a);return/^[a-zA-Z]/.test(b)||(b="id-"+b),b},j=function(a){var b=strcase.paramCase(a);return/^[a-zA-Z]/.test(b)||(b="class-"+b),b};return{convertToId:i,convertToCssClassName:j,renderWithCachedData:f,appendElementsInDomOrder:d,load:b,loadPartials:c}}(),pathvisiojs.view.pathwayDiagram.svg.infoBox=function(){"use strict";function a(a,b){if(!a||!b)return console.warn("Error: Missing input parameters.");var c=[];b.hasOwnProperty("Name")&&c.push({key:"Title",value:b.Name}),b.hasOwnProperty("License")&&c.push({key:"Availability",value:b.License}),b.hasOwnProperty("LastModified")&&c.push({key:"Last modified",value:b.LastModified}),b.hasOwnProperty("Organism")&&c.push({key:"Organism",value:b.Organism});var c=a.selectAll("g.info-box").data([c]).enter().append("g").attr("id",function(a,b){return"info-box-"+b}).attr("class","text-area info-box"),d=c.selectAll("text").data(function(a){return a}).enter().append("text").attr("id",function(a,b){return"info-box-text"+b}).attr("class","item").attr("x",0).attr("y",function(a,b){return 14+14*b});d.append("tspan").attr("class","info-box-item-property-name").text(function(a){return a.key+": "}),d.append("tspan").attr("class","info-box-item-property-value").text(function(a){return a.value})}return{render:a}}(),pathvisiojs.view.pathwayDiagram.svg.symbol=function(){"use strict";function a(a,b){var c,e,f,g,h=strcase.paramCase(a),i=d.select("defs"),j=i.select("#"+h);j[0][0]?j.selectAll("*").remove():j=i.append("symbol").attr("id",h).attr("preserveAspectRatio","none"),d3.xml(a,"image/svg+xml",function(a){c=d3.select(a.documentElement),e=c.attr("width"),f=c.attr("height"),j.attr("viewBox","0 0 "+e+" "+f),g=c[0][0].children;do j[0][0].appendChild(g[0]);while(g.length>0);b(null)})}function b(b,c,f){d=b;var g=[];c.forEach(function(a){e[a.semanticName]=strcase.paramCase(a.uri),-1===g.indexOf(a.uri)&&g.push(a.uri)}),async.each(g,a,function(){f(null)})}function c(a,b){var c=a.selectAll("symbol")[0].map(function(a){return strcase.paramCase(a.id)});b(c)}var d,e={datanode:"shape-library-symbols-rectangle-svg"};return{loadAllCustom:b,semanticNameToIdMapping:e,getAllSymbolNames:c}}(),pathvisiojs.view.pathwayDiagram.svg.publicationXref=function(){"use strict";function a(a,b){var c,d=null,e=-1,f=!1;do e+=1,c=a.Biopax.PublicationXref[e],"undefined"!=typeof c&&c.rdfId===b&&(f=!0,d=e+1);while(f===!1&&e<a.Biopax.PublicationXref.length);return d}function b(a){var b;if(1===a.length)b=a[0];else{a.sort(function(a,b){return a-b});var c=0;if(b=a[c].toString(),a.length>2)do c+=1,(a[c-1]+1!==a[c]||a[c]+1!==a[c+1])&&(b+=1!==c?a[c-2]+2===a[c]?"-"+a[c].toString():", "+a[c].toString():", "+a[c].toString());while(c<a.length-2);c+=1,b+=a[c-2]+2===a[c]?"-"+a[c].toString():", "+a[c].toString()}return b}function c(c,d,e){var f=[],g="";d=pathvisiojs.utilities.convertToArray(d),d.forEach(function(b){var d=a(c,b);d&&f.push(d)}),f.length>0&&(g=b(f)),e(g)}function d(a,b,d,e){var f,g;c(d,e,function(c){if("node"===b){var d=a[0][0].__data__.width,e=c.toString().length,h=d-3*e/2-2;a.append("text").attr("class","citation").attr("transform",function(){return"translate("+h+" -4)"}).text(c)}else{if(f=d3.select("svg > #viewport"),"edge"!==b)throw new Error("Pathvisiojs cannot render a citation for targets of this type: "+b);f=d3.select("svg > #viewport"),g=f.append("text").attr("class","citation").attr("transform",function(){return"translate(0 -10)"}),g.append("textPath").attr("xlink:xlink:href","#"+a).attr("startOffset","50%").text(c)}})}return{getPublicationXrefString:c,render:d}}(),pathvisiojs.view.pathwayDiagram.svg.node=function(){"use strict";function a(a){a.x=d3.event.x,a.y=d3.event.y}function b(b,c){if(!b)throw new Error("Need input args to render a node.");var d,e,f,g=b.element,h=b.data,i=b.pathway;if(!i)throw new Error("Need a pathway to render a node.");if(!g)throw new Error("Need a nodeContainer to render a node.");if(!h)throw new Error("Need input data to render a node.");h.hasOwnProperty("isContainedBy")?(d=i.elements.filter(function(a){return a.id===h.isContainedBy})[0],e=h.x-d.x,f=h.y-d.y):(e=h.x,f=h.y);var j=d3.behavior.drag().origin(Object).on("drag",a);g.attr("transform",function(){return"translate("+e+" "+f+")"}).attr("style",function(a){var b="";return a.hasOwnProperty("backgroundColor")&&(b="brace"==a.ShapeType||"arc"==a.ShapeType?"fill-opacity:0; ":"Label"==a.nodeType&&"#ffffff"==a.backgroundColor?"":"fill:"+a.backgroundColor+"; fill-opacity:1; "),b}).call(j),strcase.paramCase(h.ShapeType),pathvisiojs.view.pathwayDiagram.svg.node.pathShape.render(g,h),h.hasOwnProperty("text")&&pathvisiojs.view.pathwayDiagram.svg.node.text.render(g,h),h.hasOwnProperty("PublicationXref")&&pathvisiojs.view.pathwayDiagram.svg.publicationXref.render(g,"node",b.pathway,h.PublicationXref),c(g)}function c(a,b,c){var d={};return d.x=a.x+b*a.width,d.y=a.y+c*a.height,d}function d(a){var b,c,d,e={selector:function(a){return a},label:function(a){var b="."+pathvisiojs.view.pathwayDiagram.svg.convertToCssClassName("label-"+decodeURIComponent(a));return b},xref:function(a){var b="."+pathvisiojs.view.pathwayDiagram.svg.convertToCssClassName("xref-"+decodeURIComponent(a));return b}},f=d3.map(a).entries(),g=d3.map(e).keys(),h=0;do d=g.indexOf(f[h].key),-1!==d&&(c=g[d],b=e[c](f[h].value)),h+=1;while(!b&&h<f.length);var i,j=a.cssClass||"highlighted-node",k=a.style,l=a.svgId||"pathvisiojs-diagram",m=d3.select("#"+l),n="";k&&(i=d3.map(k).entries(),i.forEach(function(a){n+=strcase.paramCase(a.key)+":"+a.value+"; "}));var o=m.selectAll(b);o.each(function(){var a=d3.select(this),b=a[0][0].getBBox().height,c=a[0][0].getBBox().width;a.append("rect").attr("x",-2.5).attr("y",-2.5).attr("class",j).attr("style",n).attr("width",c+5).attr("height",b+5)})}function e(a,b,c){var e=a.attr("id")||"pathvisiojs-diagram";a.selectAll(".highlighted-from-typeahead").remove();var f={};f.svgId=e,f.label=c,f.cssClass="highlighted-node highlighted-from-typeahead",d(f),d3.select("#clear-highlights-from-typeahead")[0][0].style.visibility="visible"}function f(a){a=a||"pathvisiojs-diagram";var b=d3.select("#"+a);b.selectAll(".highlighted-from-typeahead").remove();var c=d3.select("#highlight-by-label-input");c[0][0].value="",c.attr("placeholder",""),d3.select("#clear-highlights-from-typeahead")[0][0].style.visibility="hidden"}return{render:b,getPortCoordinates:c,highlight:d,highlightByLabel:e,clearHighlightsFromTypeahead:f}}(),pathvisiojs.view.pathwayDiagram.svg.node.anchor=function(){"use strict";function a(a,b,c){if(!a)throw new Error("container element not specified for rendering anchors.");if(!b)throw new Error("parentEdgeId missing for rendering anchors.");if(!c)throw new Error("anchor data missing for rendering anchors.");c=pathvisiojs.utilities.convertToArray(c);var d=10,e=10;a.selectAll(".node.anchor.parent-edge-"+pathvisiojs.view.pathwayDiagram.svg.convertToId(b)).data(c).enter().append("g").attr("transform",function(a){var c=pathvisiojs.view.pathwayDiagram.svg.edge.getPointAtPositionById(b,a.anchorPosition),f=c.x-d/2,g=c.y-e/2;return"translate("+f+" "+g+")"}).attr("class","node anchor parent-edge-"+pathvisiojs.view.pathwayDiagram.svg.convertToId(b)).attr("style",function(a){var b;return a.hasOwnProperty("backgroundColor")&&(b="brace"==a.ShapeType||"arc"==a.ShapeType?"fill-opacity:0; ":"Label"==a.nodeType&&"#ffffff"==a.backgroundColor?"":"fill:"+a.backgroundColor+"; fill-opacity:1; "),b}).each(function(a){var b=d3.select(this);a.width||(a.width=d),a.height||(a.height=e),pathvisiojs.view.pathwayDiagram.svg.node.pathShape.render(b,a)})}return{render:a}}(),pathvisiojs.view.pathwayDiagram.svg.node.EntityNode=function(){"use strict";function a(a){if(!a.data)throw new Error("EntityNode data missing.");if(!a.pathway)throw new Error("Pathway not specified for this EntityNode. Pathway is needed for items like setting the Organism for DataNode annotations.");pathvisiojs.view.pathwayDiagram.svg.node.render(a,function(b){if(b.attr("class",function(a){var b="node entity-node "+pathvisiojs.view.pathwayDiagram.svg.convertToCssClassName(a.nodeType)+" ";return"DataNode"===a.nodeType&&(b+=pathvisiojs.view.pathwayDiagram.svg.convertToCssClassName(a.dataNodeType)+" ",b+=pathvisiojs.view.pathwayDiagram.svg.convertToCssClassName("label-"+decodeURIComponent(a.text.line[0]))+" ",a.DatasourceReference&&(b+="has-xref ",b+=pathvisiojs.view.pathwayDiagram.svg.convertToCssClassName("xref-"+decodeURIComponent(a.DatasourceReference.ID+","+a.DatasourceReference.Database))+" ")),a.hasOwnProperty("CellularComponent")&&(b+="cellular-component "+pathvisiojs.view.pathwayDiagram.svg.convertToCssClassName(a.CellularComponent)+" "),b}),"DataNode"===a.data.nodeType){var c=!0;b.on("mousedown",function(){c=!0}).on("mousemove",function(){c=!1}).on("mouseup",function(b){if(c){var d=null,e=null;b.DatasourceReference&&b.DatasourceReference.ID&&b.DatasourceReference.Database&&(d=b.DatasourceReference.ID,e=b.DatasourceReference.Database),pathvisiojs.view.annotation.xRef.render(a.pathway.Organism,d,e,b.text.line.join(" "),b.dataNodeType)}})}})}return{render:a}}(),pathvisiojs.view.pathwayDiagram.svg.node.pathShape=function(){"use strict";function a(a,b){var c,d=strcase.camelCase(b.ShapeType);pathvisiojs.view.pathwayDiagram.svg.node.pathShape.hasOwnProperty(d)||(c=/Double$/gi,d=d.replace(c,""),pathvisiojs.view.pathwayDiagram.svg.node.pathShape.hasOwnProperty(d)?console.warn('Requested pathShape "'+b.ShapeType+'" is not available with linetype of "Double". Using linetype of "Solid" instead'):(console.warn('Requested pathShape "'+b.ShapeType+'" is not available. Using pathShape "rounded-rectangle" instead'),d="roundedRectangle"));var e=a.attr("style");a.attr("style",function(a){return a.hasOwnProperty("borderColor")&&"Label"!=a.nodeType&&(e+="stroke:"+a.borderColor+"; "),e});var f=1,g="",h=a.insert("g",":first-child");h.attr("stroke-width",function(a){return isNaN(a.borderWidth)||(f=a.borderWidth),f}).attr("transform",function(a){return a.rotate&&(g+=" rotate("+a.rotate+","+a.width/2+","+a.height/2+")"),g});var i=pathvisiojs.view.pathwayDiagram.svg.node.pathShape[d].getAttributes(b.width,b.height,b.borderWidth);i.forEach(function(a){"true"==a.scale&&h.attr("stroke-width",function(a){return f/((a.width+a.height)/200)}).attr("transform",function(a){return g+=" scale("+a.width/100+", "+a.height/100+")"});var b="path",c=[a.name],d=[a.path];a.alt&&(b=a.alt,c=a.name,d=a.path);for(var e=h.append(b),i=0;i<c.length;i++)e.attr(c[i],d[i])})}return{render:a}}(),pathvisiojs.view.pathwayDiagram.svg.node.pathShape.arc=function(){"use strict";function a(){var a=[{name:"d",scale:"true",path:"m99.5,50c0,27.338341 -22.162117,49.5 -49.5,49.5s-49.5,-22.161659 -49.5,-49.5"}];return a}return{getAttributes:a}}(),pathvisiojs.view.pathwayDiagram.svg.node.pathShape.brace=function(){"use strict";function a(){var a=[{name:"d",scale:"true",path:"m1.5,98.5c0,-32.50001 8.16667,-48.75 24.5,-48.75s24.5,-16.25001 24.5,-48.75c0,32.49999 8.16666,48.75 24.49999,48.75s24.5,16.24999 24.5,48.75"}];return a}return{getAttributes:a}}(),pathvisiojs.view.pathwayDiagram.svg.node.pathShape.complex=function(){"use strict";function a(a,b){var c=[{name:"d",path:"M 18 0 L "+(0+a-18)+" "+0+" L "+(0+a)+" "+18+" L "+(0+a)+" "+(0+b-18)+" L "+(0+a-18)+" "+(0+b)+" L "+18+" "+(0+b)+" L "+0+" "+(0+b-18)+" L "+0+" "+18+" Z"}];return c}return{getAttributes:a}}(),pathvisiojs.view.pathwayDiagram.svg.node.pathShape.endoplasmicReticulum=function(){"use strict";function a(){var a=[{name:"d",scale:"true",path:"m73.52756,56.60967c-5.62457,-18.60675 23.51463,-32.43358 23.40173,-45.06604c-0.34426,-4.86102 -10.48934,-8.89743 -18.28974,-5.33395c-17.04119,7.87556 -15.64949,29.30503 -21.20533,42.23387c-0.35661,3.60951 -7.36274,2.46926 -7.74964,-0.48694c-5.8512,-11.38871 17.13534,-24.48692 5.96075,-29.42586c-19.63467,-8.16979 -28.75184,21.15346 -22.0682,28.81784c7.4956,14.17602 -2.17949,24.40679 -6.74689,15.49637c-2.44209,-5.30613 6.06605,-11.08445 -0.80351,-16.17689c-4.31991,-2.79993 -11.75555,-0.64618 -16.15468,3.0943c-12.89117,10.73799 4.72957,40.98145 20.96467,36.14635c4.69833,-1.95989 -3.23603,-8.70151 3.90717,-9.59951c7.29767,-0.81255 5.17628,6.18889 7.68745,9.22691c2.3071,4.0509 4.83232,8.35538 10.7626,11.6237c4.78642,2.53724 15.29437,2.11225 16.77148,-1.95795c2.0318,-9.26291 -26.11129,-28.35848 -10.68903,-31.2815c18.55524,-2.71473 4.74866,23.84573 24.31006,29.69419c9.50188,2.02824 15.63902,-0.62194 14.81255,-4.03272c-2.74586,-11.26327 -25.13557,-22.6802 -24.96441,-33.14968"}];return a}return{getAttributes:a}}(),pathvisiojs.view.pathwayDiagram.svg.node.pathShape.golgiApparatus=function(){"use strict";function a(){var a=[{name:"d",scale:"true",path:"m58.4671,16.99297c-22.2053,-19.30712 37.3101,-19.538 25.5673,-3.1145c-8.8077,11.998 -17.0665,37.53828 -0.9417,64.06707c13.3147,17.47735 -41.7485,17.92546 -27.7555,-0.94919c11.3458,-18.99656 10.2868,-51.87342 3.1299,-60.00338l0,0z"},{name:"d",path:"m31.2144,22.48219c-10.7917,-13.83614 29.8976,-12.81612 18.4075,0.4332c-4.067,4.79263 -5.7828,39.75796 1.1607,48.44653c8.5294,12.0082 -32.853,12.49764 -20.5002,-1.45349c6.9528,-11.2083 10.4738,-33.76451 0.932,-47.42624l0,0z"},{name:"d",path:"m29.80396,32.77896c1.58418,7.4093 2.72346,10.80737 -1.48298,24.77019c-3.73195,8.38708 -3.6004,10.5513 -11.73233,12.53496c-6.6833,1.07092 -11.86483,-6.32111 -4.7933,-10.40477c4.85573,-3.63095 6.14109,-7.02681 6.65889,-14.82198c-0.23922,-6.14805 0.8145,-10.21755 -5.36692,-12.88742c-7.62432,-1.41744 -6.08804,-10.67651 4.82406,-8.95195c5.84935,0.66319 10.2824,5.52823 11.89258,9.76096z"}];return a}return{getAttributes:a}}(),pathvisiojs.view.pathwayDiagram.svg.node.pathShape.gridSquare=function(){"use strict";function a(){var a=[{name:"d",scale:"true",path:"m1,1l99,0l0,99l-99,0l0,-99z"}];return a}return{getAttributes:a}}(),pathvisiojs.view.pathwayDiagram.svg.node.pathShape.hexagon=function(){"use strict";function a(){var a=[{name:"d",scale:"true",path:"m1.42004,50.99635l21.07262,-42.13943l56.19152,0l21.0667,42.13943l-21.0667,42.14507l-56.19152,0l-21.07262,-42.14507z"}];return a}return{getAttributes:a}}(),pathvisiojs.view.pathwayDiagram.svg.node.pathShape.mimDegradation=function(){"use strict";function a(){var a=[{name:"d",scale:"true",path:"m8,50c0,-23.20442 18.79558,-42 42,-42c23.20442,0 42,18.79558 42,42c0,23.20442 -18.79558,42 -42,42c-23.20442,0 -42,-18.79558 -42,-42z"},{name:"d",path:"m1,1l99,99"}];return a}return{getAttributes:a}}(),pathvisiojs.view.pathwayDiagram.svg.node.pathShape.mitochondria=function(){"use strict";function a(){var a=[{name:"d",scale:"true",path:"m0,50c0,-27.62431 22.37569,-50 50,-50c27.62431,0 50,22.37569 50,50c0,27.62431 -22.37569,50 -50,50c-27.62431,0 -50,-22.37569 -50,-50z"},{name:"d",path:"m14.894899,26.347357c4.363817,-0.741571 3.827518,17.036169 8.182638,16.183825c8.27347,0.030762 2.982006,-28.148991 9.899754,-28.336687c6.967995,-0.187704 2.246651,29.947527 9.204983,29.43981c7.632813,-0.560024 0.507309,-32.935357 8.136253,-33.623082c7.698521,-0.689259 2.919197,32.039941 10.628349,32.224557c6.546684,0.160011 3.026451,-27.642808 9.56057,-26.921232c7.192177,0.79388 0.664818,29.842905 7.781624,31.667604c4.748405,1.215439 4.420822,-18.257757 9.204018,-17.440804c11.128883,7.577278 8.628105,37.698658 -2.179977,44.645138c-3.138542,0.698479 -3.965698,-10.502029 -7.112938,-9.905075c-5.59005,1.058502 -3.982124,22.284088 -9.603096,21.799461c-5.239281,-0.456947 -2.226364,-21.636383 -7.47047,-21.730232c-6.961235,-0.116928 -3.357895,28.924408 -10.316231,28.495148c-6.140846,-0.375397 -1.73064,-24.950363 -7.825104,-26.191963c-5.681847,-1.156982 -5.378429,22.170242 -11.027426,20.680939c-6.249069,-1.644684 -0.469624,-26.673519 -6.759275,-27.865887c-3.728954,-0.706188 -2.647665,14.400654 -6.403677,14.545292c-14.016198,-5.938736 -15.748776,-39.707981 -3.899994,-47.666811z"}];return a}return{getAttributes:a}
}(),pathvisiojs.view.pathwayDiagram.svg.node.pathShape.none=function(){"use strict";function a(){var a=[{name:"d",path:"M0 0"}];return a}return{getAttributes:a}}(),pathvisiojs.view.pathwayDiagram.svg.node.pathShape.oval=function(){"use strict";function a(){var a=[{name:"d",scale:"true",path:"m0,50c0,-27.62431 22.37569,-50 50,-50c27.62431,0 50,22.37569 50,50c0,27.62431 -22.37569,50 -50,50c-27.62431,0 -50,-22.37569 -50,-50z"}];return a}return{getAttributes:a}}(),pathvisiojs.view.pathwayDiagram.svg.node.pathShape.ovalDouble=function(){"use strict";function a(a,b){var c=[{name:["ry","rx","cy","cx"],alt:"ellipse",path:[b/2,a/2,b/2,a/2]},{name:["ry","rx","cy","cx"],alt:"ellipse",path:[b/2-6,a/2-6,b/2,a/2]}];return c}return{getAttributes:a}}(),pathvisiojs.view.pathwayDiagram.svg.node.pathShape.pentagon=function(){"use strict";function a(a,b){var c=[{name:"d",path:"m0,"+.81*b+"l0,-"+.62*b+"l"+.62*a+",-"+.19*b+"l"+.38*a+","+.5*b+"l-"+.38*a+","+.5*b+"l-"+.62*a+",-"+.19*b+"z"}];return c}return{getAttributes:a}}(),pathvisiojs.view.pathwayDiagram.svg.node.pathShape.rectangle=function(){"use strict";function a(a,b){var c=[{name:"d",path:"m0,0l"+a+",0l0,"+b+"l-"+a+",0l0,-"+b+"z"}];return c}return{getAttributes:a}}(),pathvisiojs.view.pathwayDiagram.svg.node.pathShape.roundedRectangle=function(){"use strict";function a(a,b){var c=[{name:"d",path:"m0,10c0,-5.43379 4.56621,-10 10,-10l"+(a-20)+",0c5.43379,0 10,4.56621 10,10l0,"+(b-20)+"c0,5.43379 -4.56621,10 -10,10l"+(20-a)+",0c-5.43379,0 -10,-4.56621 -10,-10l0,"+(20-b)+"z"}];return c}return{getAttributes:a}}(),pathvisiojs.view.pathwayDiagram.svg.node.pathShape.roundedRectangleDouble=function(){"use strict";function a(a,b){var c=[{name:"d",path:"m6,13c0,-3.80365 3.19635,-7 7,-7l"+(a-26)+",0c3.80365,0 7,3.19635 7,7l0,"+(b-26)+"c0,3.80365 -3.19635,7 -7,7l"+(26-a)+",0c-3.80365,0 -7,-3.19635 -7,-7l0,"+(26-b)+"z"},{name:"d",path:"m0,10c0,-5.43379 4.56621,-10 10,-10l"+(a-20)+",0c5.43379,0 10,4.56621 10,10l0,"+(b-20)+"c0,5.43379 -4.56621,10 -10,10l"+(20-a)+",0c-5.43379,0 -10,-4.56621 -10,-10l0,"+(20-b)+"z"}];return c}return{getAttributes:a}}(),pathvisiojs.view.pathwayDiagram.svg.node.pathShape.sarcoplasmicReticulum=function(){"use strict";function a(){var a=[{name:"d",scale:"true",path:"m46.60182,1.40724c-32.37224,1.34138 -36.32004,22.77011 -26.50318,38.12777c9.31826,18.3425 -18.7656,30.15016 2.56955,49.37807c16.82126,13.11594 46.33175,6.10508 52.12638,-8.56826c5.89916,-15.24847 -10.95099,-26.0272 -3.29316,-40.96135c10.85342,-19.88432 -0.77615,-38.13043 -24.89959,-37.97624z"}];return a}return{getAttributes:a}}(),pathvisiojs.view.pathwayDiagram.svg.node.pathShape.triangle=function(){"use strict";function a(a,b){var c=[{name:"d",path:"m0,"+b+"l0,-"+b+"l"+a+","+b/2+"l-"+a+","+b/2+"z"}];return c}return{getAttributes:a}}(),pathvisiojs.view.pathwayDiagram.svg.node.text=function(){"use strict";function a(a,b){var c={};c.padding=5;var d={};d.cache={},d.cache.fontSize=12,d.cache.alignmentBaseline=b.text.verticalAlign,d.cache.textAnchor=function(){return"left"==b.text.textAlign?"start":"right"==b.text.textAlign?"end":"middle"},d.cache.x=function(){return"left"==b.text.textAlign?-1*b.width/2:"right"==b.text.textAlign?b.width/2:0},d.cache.translate={},d.cache.translate.dx=b.width/2,d.cache.translate.dy=b.height/2,d.line={},d.line.cache={},d.line.cache.y=[];var e=b.text.line.length,f=0;b.text.line.forEach(function(){d.line.cache.y.push(f*d.cache.fontSize),f+=1});var g=a.selectAll("g.text-area").data(function(){return[b]}).enter().append("g").attr("id",function(a){return"text-container"+pathvisiojs.view.pathwayDiagram.svg.convertToId(a.id)}).attr("transform",function(){return"translate("+d.cache.translate.dx+" "+d.cache.translate.dy+")"}).attr("class","text-area").attr("style",function(a){var b="";return a.text.hasOwnProperty("color")&&(b+="fill:"+a.text.color+"; "),a.text.hasOwnProperty("fontFamily")&&(b+="font-family:"+a.text.fontFamily+"; "),a.text.hasOwnProperty("fontSize")&&(b+="font-size:"+a.text.fontSize+"px; "),a.text.hasOwnProperty("fontWeight")&&(b+="font-weight:"+a.text.fontWeight+"; "),a.text.hasOwnProperty("fontStyle")&&(b+="font-style:"+a.text.fontStyle+"; "),b});return g.selectAll("text").data(function(a){return a.text.line}).enter().append("text").attr("id",function(a,b){return"text-line"+b}).attr("x",d.cache.x).attr("y",function(a,b){return 1.1*(b-(e-1)/2)+"em"}).attr("alignment-baseline",d.cache.alignmentBaseline).attr("text-anchor",d.cache.textAnchor).text(function(a){return a}),a}return{render:a}}(),pathvisiojs.view.pathwayDiagram.svg.node.groupNode=function(){"use strict";function a(a,b){if(!a.container)throw new Error("Error: container element not specified for rendering groupNode.");if(!a.data)throw new Error("Error: group data missing for rendering groupNode.");pathvisiojs.view.pathwayDiagram.svg.node.render(a,function(c){c.attr("class",function(a){var b="node group-node "+pathvisiojs.view.pathwayDiagram.svg.convertToCssClassName(a.groupType)+" ";return b});var d=a.data.contains;b(c,d)})}return{render:a}}(),pathvisiojs.view.pathwayDiagram.svg.node.useElement=function(){"use strict";function a(a,b){a.append("use").data([b]).attr("id",function(a){return"node-"+pathvisiojs.view.pathwayDiagram.svg.convertToId(a.id)}).attr("class",function(){return"symbol "}).attr("transform",function(a){var b="scale(1)";return a.hasOwnProperty("rotation")&&(b="rotate("+a.rotation+" "+a.width/2+" "+a.height/2+")"),b}).attr("x",0).attr("y",0).attr("width",function(a){return a.width}).attr("height",function(a){return a.height}).attr("style",function(a){var b="";a.hasOwnProperty("borderColor")&&(b+="stroke:"+a.borderColor+"; ");var c;return c=a.hasOwnProperty("borderWidth")?2*a.borderWidth:2,b+="stroke-width:"+c+"; "}).attr("xlink:xlink:href",function(a){var b=strcase.paramCase(a.ShapeType),c=pathvisiojs.view.pathwayDiagram.svg.symbol.semanticNameToIdMapping[b];return"#"+c})}function b(a,b,c){var d={};return d.x=a.x+b*a.width,d.y=a.y+c*a.height,d}function c(a,b,c){a.selectAll(".highlighted-node").remove();var d=b.elements.filter(function(a){return"data-node"===a.nodeType&&!!a.textLabel}),e=d.filter(function(a){return-1!==a.textLabel.text.indexOf(c)});e.forEach(function(b){var c=a.select("#node-"+b.id),d=c[0][0].getBBox().height,e=c[0][0].getBBox().width;c.append("rect").attr("class","highlighted-node").attr("x",-2.5).attr("y",-2.5).attr("width",e+5).attr("height",d+5)})}return{render:a,getPortCoordinates:b,highlightByLabel:c}}(),pathvisiojs.view.pathwayDiagram.svg.edge=function(){"use strict";function a(a,b){var c=d3.select("#"+pathvisiojs.view.pathwayDiagram.svg.convertToId(a))[0][0],d=c.getTotalLength(),e=b*d,f=c.getPointAtLength(e);return f}function b(a,b){var c,d=a.svg,e=a.element;if(!d)throw new Error("svg missing");var f=a.pathway;if(!f)throw new Error("pathway missing");var g=a.data;if(!g)throw new Error("data missing");var h=a.container;if(!h)throw new Error("container missing");var i=a.data.markerStart,j=a.data.markerEnd,k=pathvisiojs.view.pathwayDiagram.svg.convertToId(g.id);g.hasOwnProperty("isContainedBy")&&(c=f.elements.filter(function(a){return a.id===g.isContainedBy})[0],g.Point.forEach(function(a){a.x=a.x-c.x,a.y=a.y-c.y}));var l,m,n=g.stroke;async.series({markerStartAttributeValue:function(a){var b=pathvisiojs.view.pathwayDiagram.svg.edge.marker.semanticNameToIdMapping[i];b?n?"none"===i?(l="none",a(null,l)):-1===pathvisiojs.view.pathwayDiagram.svg.edge.marker.colorsAvailable[b].indexOf(n)?pathvisiojs.view.pathwayDiagram.svg.edge.marker.appendNonDefaultColorMarkerBothEnds(d,b,n,function(){l="url(#"+strcase.paramCase(b+"-start-"+n)+")",a(null,l)}):(l="url(#"+strcase.paramCase(b+"-start-"+n)+")",a(null,l)):(l="url(#"+strcase.paramCase(b+"-start-default")+")",a(null,l)):(console.warn('Pathvisiojs does not have access to a marker (arrowhead) of the requested type: "'+i+'"'),l="none",a(null,l))},markerEndAttributeValue:function(a){var b=pathvisiojs.view.pathwayDiagram.svg.edge.marker.semanticNameToIdMapping[j];b?n?"none"===j?(m="none",a(null,m)):-1===pathvisiojs.view.pathwayDiagram.svg.edge.marker.colorsAvailable[b].indexOf(n)?pathvisiojs.view.pathwayDiagram.svg.edge.marker.appendNonDefaultColorMarkerBothEnds(d,b,n,function(){m="url(#"+strcase.paramCase(b+"-end-"+n)+")",a(null,m)}):(m="url(#"+strcase.paramCase(b+"-end-"+n)+")",a(null,m)):(m="url(#"+strcase.paramCase(b+"-end-default")+")",a(null,m)):(console.warn('Pathvisiojs does not have access to a marker (arrowhead) of the requested type: "'+j+'"'),m="none",a(null,m))},path:function(){e.attr("marker-start",l).attr("marker-end",m).attr("style",function(a){var b="stroke-width:"+a.strokeWidth+"; ";return a.hasOwnProperty("stroke")&&(b+="stroke:#"+a.stroke+"; "),a.hasOwnProperty("strokeStyle")&&"double"===a.strokeStyle&&(b+="stroke-width:"+3*a.strokeWidth+"; "),b}).attr("fill","none").attr("d",function(a){return pathvisiojs.view.pathwayDiagram.svg.edge.path.getPath(a)}),g.hasOwnProperty("Anchor")&&pathvisiojs.view.pathwayDiagram.svg.node.anchor.render(h,k,g.Anchor),g.hasOwnProperty("PublicationXref")?(pathvisiojs.view.pathwayDiagram.svg.publicationXref.render(k,"edge",f,g.PublicationXref),b(e)):b(e)}})}return{render:b,getPointAtPositionById:a}}(),pathvisiojs.view.pathwayDiagram.svg.edge.graphicalLine=function(){"use strict";function a(a){a.svg;var b=a.container;a.data,pathvisiojs.view.pathwayDiagram.svg.edge.render(a,function(a){a.attr("class",function(a){var b="edge graphical-line";return a.hasOwnProperty("strokeStyle")&&"dashed"===a.strokeStyle&&(b+=" dashed-stroke"),b});var c,d,e=b[0][0];e.hasOwnProperty("__data__")&&a.attr("transform",function(){return c=e.__data__.x||0,d=e.__data__.y||0,"translate("+-1*c+" "+-1*d+")"})})}return{render:a}}(),pathvisiojs.view.pathwayDiagram.svg.edge.interaction=function(){"use strict";function a(a){a.svg;var b,c,d=a.container,e=a.data;e.InteractionGraph&&(e.InteractionGraph.length>1?(b=e.InteractionGraph[0],c=e.InteractionGraph[e.InteractionGraph.length-1]):c=e.InteractionGraph[0]),pathvisiojs.view.pathwayDiagram.svg.edge.render(a,function(b){b.attr("class",function(c){var d="edge interaction ";return c.DatasourceReference&&(d+="has-xref ",c.DatasourceReference.ID&&b.on("click",function(b){pathvisiojs.view.annotation.xRef.render(a.pathway.Organism,b.DatasourceReference.ID,b.DatasourceReference.Database,b.renderableType,b.markerStart+"<-->"+b.markerEnd)})),c.hasOwnProperty("strokeStyle")&&"dashed"===c.strokeStyle&&(d+=" dashed-stroke"),d});var c,e,f=d[0][0];f.hasOwnProperty("__data__")&&b.attr("transform",function(){return c=f.__data__.x||0,e=f.__data__.y||0,"translate("+-1*c+" "+-1*e+")"})})}return{render:a}}(),pathvisiojs.view.pathwayDiagram.svg.edge.marker=function(){"use strict";function a(a,c){var d=strcase.paramCase(a),e=d+"-start-default",g=d+"-end-default",h=f.select("defs").select("#"+e);h=f.select("defs").append("marker").attr("id",e).attr("preserveAspectRatio","none"),b(a,h,e,!1);var i=f.select("defs").select("#"+g);i=f.select("defs").append("marker").attr("id",g).attr("preserveAspectRatio","none"),b(a,i,g,!0),c(null)}function b(a,b,c,d){d3.xml(a,"image/svg+xml",function(a){var e=d3.select(a.documentElement),f=e.attr("width"),g=e.attr("height"),h=e.attr("class"),i=e.attr("refXstart"),j=e.attr("refYstart"),k=e.attr("refXend"),l=e.attr("refYend"),m=e.attr("viewBox");b.attr("viewBox",m).attr("markerWidth",f).attr("markerHeight",g).attr("markerUnits","strokeWidth").attr("orient","auto"),d?(b.attr("refX",k).attr("refY",l),b.append("g").attr("id","g-"+c).attr("class",h).attr("transform","rotate(180, "+f/2+", "+g/2+")")):(b.attr("refX",i).attr("refY",j),b.append("g").attr("id","g-"+c).attr("class",h));var n=document.querySelector("#g-"+c),o=e[0][0].childNodes;do n.appendChild(o[0]);while(o.length>0)})}function c(b,c,d){f=b;var e,g,h,i=[];c.forEach(function(a){e=a.semanticName,g=a.uri,h=strcase.paramCase(g),pathvisiojs.view.pathwayDiagram.svg.edge.marker.semanticNameToIdMapping[e]=h,pathvisiojs.view.pathwayDiagram.svg.edge.marker.colorsAvailable[h]=["default"],-1===i.indexOf(g)&&i.push(g)}),async.each(i,a,function(){d(null)})}function d(a,b,c,d){e(a,b,"start",c,function(){e(a,b,"end",c,function(){pathvisiojs.view.pathwayDiagram.svg.edge.marker.colorsAvailable[b].push(c),d()})})}function e(a,b,c,d,e){var f,g,h,i,j,k=b+"-"+c+"-default",l=pathvisiojs.utilities.cloneNode("#"+k);"end"===c&&(f=d3.select("#"+b+"-"+c+"-default"),g=parseFloat(f.attr("refX")),h=parseFloat(f.attr("refY")),i=f.attr("viewBox"),i&&(j=i.split(" "),l.attr("viewBox",i)),l.attr("refX",g),l.attr("refY",h));var m=l.select("g"),n=m.attr("style")||"";m.attr("class").match(/default-stroke-color/)&&(n+="stroke:#"+d+"; "),m.attr("class").match(/default-fill-color/)&&(n+="fill:#"+d+"; ");var o=b+"-"+c+"-"+d;l.attr("id",o),m.attr("id",strcase.paramCase("g-"+o)),m.attr("style",n),e(o)}var f,g={arrow:"shape-library-markers-arrow-svg","necessary-stimulation":"shape-library-markers-mim-necessary-stimulation-svg",binding:"shape-library-markers-mim-binding-svg",conversion:"shape-library-markers-mim-conversion-svg",stimulation:"shape-library-markers-mim-stimulation-svg",modification:"shape-library-markers-mim-modification-svg",catalysis:"shape-library-markers-mim-catalysis-svg",inhibition:"shape-library-markers-mim-inhibition-svg",cleavage:"shape-library-markers-mim-cleavage-svg","covalent-bond":"shape-library-markers-mim-covalent-bond-svg","transcription-translation":"shape-library-markers-mim-transcription-translation-svg",gap:"shape-library-markers-mim-gap-svg","inhibitory-activity":"shape-library-markers-t-bar-svg",unspecified:"shape-library-markers-none-svg",activity:"shape-library-markers-arrow-svg","mim-branching-left":"shape-library-markers-mim-branching-left-svg","mim-branching-right":"shape-library-markers-mim-branching-right-svg","mim-necessary-stimulation":"shape-library-markers-mim-necessary-stimulation-svg","mim-binding":"shape-library-markers-mim-binding-svg","mim-conversion":"shape-library-markers-mim-conversion-svg","mim-stimulation":"shape-library-markers-mim-stimulation-svg","mim-modification":"shape-library-markers-mim-modification-svg","mim-catalysis":"shape-library-markers-mim-catalysis-svg","mim-inhibition":"shape-library-markers-mim-inhibition-svg","mim-cleavage":"shape-library-markers-mim-cleavage-svg","mim-covalent-bond":"shape-library-markers-mim-covalent-bond-svg","mim-transcription-translation":"shape-library-markers-mim-transcription-translation-svg","mim-gap":"shape-library-markers-mim-gap-svg","t-bar":"shape-library-markers-t-bar-svg",none:"shape-library-markers-none-svg"},h={"shape-library-markers-arrow-svg":["default"],"shape-library-markers-mim-necessary-stimulation-svg":["default"],"shape-library-markers-mim-binding-svg":["default"],"shape-library-markers-mim-conversion-svg":["default"],"shape-library-markers-mim-stimulation-svg":["default"],"shape-library-markers-mim-modification-svg":["default"],"shape-library-markers-mim-catalysis-svg":["default"],"shape-library-markers-mim-inhibition-svg":["default"],"shape-library-markers-mim-cleavage-svg":["default"],"shape-library-markers-mim-covalent-bond-svg":["default"],"shape-library-markers-mim-transcription-translation-svg":["default"],"shape-library-markers-mim-gap-svg":["default"],"shape-library-markers-t-bar-svg":["default"],"shape-library-markers-mim-branching-left-svg":["default"],"shape-library-markers-mim-branching-right-svg":["default"],"shape-library-markers-none-svg":["default"]};return{appendNonDefaultColorMarkerBothEnds:d,loadAllCustom:c,semanticNameToIdMapping:g,colorsAvailable:h}}(),pathvisiojs.view.pathwayDiagram.svg.edge.point=function(){"use strict";function a(a,b){if(b.hasOwnProperty("graphRef")){if(a.hasOwnProperty("nodes")){var c=a.nodes.filter(function(a){return a.graphId===b.graphRef})[0];if(void 0!==c)return{type:"node",element:c}}if(a.hasOwnProperty("groups")){var d=a.groups.filter(function(a){return a.graphId===b.graphRef})[0];if(void 0!==d)return{type:"group",groupId:d.groupId}}var e=a.edges.filter(function(a){return a.hasOwnProperty("anchors")}),f=null,g=-1;do g+=1,f=e[g].anchors.filter(function(a){return a.graphId===b.graphRef})[0];while(!f&&g<e.length);return{type:"anchor",element:f,edge:e[g]}}return{type:"unconnected"}}function b(b,c){if(!b||!c)return console.warn("Error: Missing input parameters.");var d={},e=a(b,c);if("anchor"!==e.type)if("unconnected"===e.type)d.x=c.x,d.y=c.y;else if("node"===e.type)d=pathvisiojs.view.pathwayDiagram.svg.node.getPortCoordinates(e.element,c.relX,c.relY);else{if("group"!==e.type)return"error";var f=pathvisiojs.view.pathwayDiagram.svg.node.groupNode.getDimensions(b,e.groupId);d=pathvisiojs.view.pathwayDiagram.svg.node.getPortCoordinates(f,c.relX,c.relY)}else{var g=document.select("#interaction-"+e.edge.graphId)[0][0];d=g.getPointAtLength(e.element.position*g.getTotalLength())}return d}function c(a,b){var c=Math.abs(a.dx)===Math.abs(b.dy)&&Math.abs(a.dy)===Math.abs(b.dx),d=(b.x-a.x)/Math.abs(b.x-a.x)===a.dx||(b.y-a.y)/Math.abs(b.y-a.y)===a.dy,e=(a.x-b.x)/Math.abs(a.x-b.x)===b.dx||(a.y-b.y)/Math.abs(a.y-b.y)===b.dy;return c&&d&&e}return{getGraphRef:a,getCoordinates:b,isTwoPointElbow:c}}(),pathvisiojs.view.pathwayDiagram.svg.edge.path=function(){"use strict";function a(a){var c=a.ConnectorType;return"Straight"==c?2==a.Point.length?j(a.Point):(console.log("Too many points for a straight line!"),null):"Segmented"==c?j(a.Point):"Elbow"==c?j(b(a.Point)):"Curved"==c?k(b(a.Point)):(console.log("Unknown connector type: "+c),null)}function b(a){2==a.length&&(a=c(a));var b=[];b[0]=a[0];var d,e=h(a[0]);for(d=1;d<a.length;d++){var f=a[d].y-a[d-1].y,g=a[d].x-a[d-1].x;b[d]=1==e?{x:a[d-1].x,y:a[d-1].y+f}:{x:a[d-1].x+g,y:a[d-1].y},e=(e+1)%2}return b[a.length]=a[a.length-1],b}function c(a){var b=e(a),c=20,f=a[0],g=a[1],j=[];return j[0]=f,0==b||(1==b?j[1]=d(f,g,h(f),i(g)):2==b?(j[1]=d(f,{x:g.x+c*i(g),y:g.y+c*i(g)},h(f),i(f)),j[2]=d(g,j[1],h(g),i(g))):3==b?(j[2]={x:f.x+(g.x-f.x)/2,y:f.y+(g.y-f.y)/2},j[1]=d(f,j[2],h(f),i(f)),j[3]=d(g,j[2],h(g),i(g))):console.log("Too many waypoint estimated!!!")),j[b+1]=g,j}function d(a,b,c,d){var e=20,f=0,g=0;return 1==c?(f=a.x+(b.x-a.x)/2,g=a.y+e*d):(f=a.x+e*d,g=a.y+(b.y-a.y)/2),{x:f,y:g}}function e(a){var b=a[0],c=a[1],d=f(c.x-b.x)>0,e=d?b:c,h=d?c:b,i=f(e.y-h.y)<0,j=i?1:0,k=d?g(b):g(c),l=d?g(c):g(b),m=[[[1,1],[2,2],[1,3],[0,2]],[[2,0],[1,1],[0,2],[1,1]],[[3,1],[2,2],[1,1],[2,0]],[[2,2],[3,3],[2,2],[1,1]]];return m[k][l][j]}function f(a){return a?0>a?-1:1:0}function g(a){return Math.abs(a.RelX)>Math.abs(a.RelY)?a.RelX>0?1:3:a.RelY>0?2:0}function h(a){return Math.abs(a.RelX)>Math.abs(a.RelY)?0:1}function i(a){return Math.abs(a.RelX)>Math.abs(a.RelY)?a.RelX>0?1:-1:a.RelY>0?1:-1}var j=d3.svg.line().x(function(a){return a.x}).y(function(a){return a.y}).interpolate("linear"),k=d3.svg.line().x(function(a){return a.x}).y(function(a){return a.y}).interpolate("basis");return{getPath:a}}(),pathvisiojs.view.pathwayDiagram.img=function(){"use strict";function a(a,b){if(!a)throw new Error("Missing input data.");var c=a.container,d=parseFloat(a.containerWidth),e=parseFloat(a.containerHeight),f=a.fitToContainer,g=a.renderableSourceDataElement.uri;g||(console.warn("No uri specified for sourceData element."),g=a.renderableSourceDataElement.uri||pathvisiojs.config.diagramNotAvailableIconUri),loadImage(g,function(a){"error"===a.type?(console.warn("Error loading image "+g),loadImage(pathvisiojs.config.diagramNotAvailableIconUri,function(a){c[0][0].appendChild(a),b(null,a)},{maxWidth:d,maxHeight:e})):(c[0][0].appendChild(a),a.setAttribute("style","margin: auto; position: absolute; top: 0; left: 0; bottom: 0; right: 0;"),b(null,a))},{maxWidth:d,maxHeight:e,contain:f})}return{load:a}}();